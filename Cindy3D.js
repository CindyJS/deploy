(function(){
'use strict';function aa(a){return{color:a,alpha:1,j:60,size:.05}}function q(a){return{color:a.color,alpha:a.alpha,j:a.j,size:a.size}};function da(a,b){this.s=a;this.o=b;this.aa=45;this.W=.1;this.V=100;ea(this);fa(this,[0,0,5],[0,0,0],[0,1,0])}function ea(a){var b=1/Math.tan(Math.PI/360*a.aa),c=a.W-a.V;a.A=[b*a.o/a.s,0,0,0,0,b,0,0,0,0,(a.V+a.W)/c,-1,0,0,2*a.V*a.W/c,0]}
function fa(a,b,c,d){b=r(b,c);var g=b[0],h=b[1],e=b[2];a.h=Math.sqrt(g*g+h*h+e*e);b=ga(b);d=ga(d);g=t(d,b);d=[g[0],d[0],b[0],g[1],d[1],b[1],g[2],d[2],b[2]];d=[d[4]*d[8]-d[5]*d[7],d[2]*d[7]-d[1]*d[8],d[1]*d[5]-d[2]*d[4],d[5]*d[6]-d[3]*d[8],d[0]*d[8]-d[2]*d[6],d[2]*d[3]-d[0]*d[5],d[3]*d[7]-d[4]*d[6],d[1]*d[6]-d[0]*d[7],d[0]*d[4]-d[1]*d[3]];c=[d[0]*c[0]+d[1]*c[1]+d[2]*c[2],d[3]*c[0]+d[4]*c[1]+d[5]*c[2],d[6]*c[0]+d[7]*c[1]+d[8]*c[2]];a.f=[d[0],d[1],d[2],-c[0],d[3],d[4],d[5],-c[1],d[6],d[7],d[8],-c[2],
0,0,0,1];a.i=[1,0,0,0,0,1,0,0,0,0,1,-a.h,0,0,0,1];a.g=u(a.i,a.f)};function v(a){ha(this,a.f.TRIANGLE_STRIP,a)}v.prototype=new w(["aPoint1","aPoint2","aColor","aRelativeRadius","aShininess"],[0,0,2,4,6,7,2,3,1,7,5,4,1,0,2,2]);v.prototype.H="uniform mat4 uProjectionMatrix;\n\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aPoint1;\n\nattribute vec4 aPoint2;\n\nattribute vec4 aColor;\n\nattribute vec4 aRelativeRadius;\n\nattribute vec4 aShininess;\n\nvarying vec3 vPoint1;\n\nvarying vec3 vPoint2;\n\nvarying vec3 vPos;\n\nvarying vec4 vColor;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\n\nvec4 hom;\nhom=uModelViewMatrix*aPoint1;\nvPoint1=hom.xyz/hom.w;\nhom=uModelViewMatrix*aPoint2;\nvPoint2=hom.xyz/hom.w;\nvec3 dir=normalize(vPoint2-vPoint1);\n\n\nvec3 d2,d3;\nif(abs(dir.x) <abs(dir.y))\nd2=vec3(1,0,0);\nelse\nd2=vec3(0,1,0);\nd2=normalize(cross(dir,d2));\nd3=normalize(cross(dir,d2));\n\nvPos=aRelativeRadius.w*(mat3(dir,d2,d3)*aRelativeRadius.xyz)\n+0.5*((vPoint2+vPoint1) +aRelativeRadius.x*(vPoint2-vPoint1));\n\n\nvColor=aColor;\nvShininess=aShininess.x;\nvRadius=aRelativeRadius.w;\n\n\ngl_Position=uProjectionMatrix*vec4(vPos,1);\n}\n";
v.prototype.A="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\nvarying vec3 vPoint1;\n\nvarying vec3 vPoint2;\n\nvarying vec3 vPos;\n\nvarying float vRadius;\n\nvec3 endcaps(in float mu,inout vec3 pos){\nvec3 center;\nif(mu<0.0){\ncenter=vPoint1;\n}else if(mu>1.0){\ncenter=vPoint2;\n}else{\nreturn(1.0-mu)*vPoint1+mu*vPoint2;\n}\npos=sphere(vPos,center,vRadius, -1.0);\nreturn center;\n}\n\n\n\n\nvoid main(){\n\n\nvec3 ba=vPoint2-vPoint1;\nvec3 u=ba/dot(ba,ba);\nvec3 v=vPos-dot(vPos,ba)*u;\nvec3 w=dot(vPoint1,ba)*u-vPoint1;\nfloat a=dot(v,v);\nfloat b=2.0*dot(v,w);\nfloat c=dot(w,w) -vRadius*vRadius;\nfloat d=b*b-4.0*a*c;\nif(d<0.0)\ndiscard;\nfloat lambda= (b+sqrt(d))/(-2.0*a);\nvec3 pointOnSurface=lambda*vPos;\nfloat mu=dot(pointOnSurface-vPoint1,u);\nvec3 center=endcaps(mu,pointOnSurface);\nvec3 normal=normalize(pointOnSurface-center);\nfinish(pointOnSurface,normal);\n}\n";
v.prototype.add=function(a,b,c){var d=a[0],g=a[1],h=a[2];a=a[3];var e=b[0],m=b[1],l=b[2];b=b[3];var f=c.color,n=c.j,k=c.size,p=f[0],y=f[1],f=f[2];c=c.alpha;1>c&&(this.C=!1);x(this,[d,g,h,a,e,m,l,b,p,y,f,c,1,1,1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,1,1,-1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,1,-1,1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,1,-1,-1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,-1,1,1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,-1,1,-1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,-1,-1,1,k,n,0,0,0,d,g,h,a,e,m,l,b,p,y,f,c,-1,-1,-1,
k,n,0,0,0])};v.prototype.B=function(a){if(0!==this.count){var b=a.f;b.enable(b.CULL_FACE);b.cullFace(b.BACK);this.D(b,a.A.bind(a));b.disable(b.CULL_FACE)}};function A(a){var b;b=void 0===b?null:b;return"list"!==a.ctype?(console.log("argument is not a list"),b):a.value}function B(a,b){b=void 0===b?[0,0,0,0]:b;var c=A(a);if(null===c)return b;c=c.map(D);4<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,4));for(;3>c.length;)c.push(0);3===c.length&&c.push(1);return c}
function E(a,b){b=void 0===b?[0,0,0]:b;var c=A(a);if(null===c)return b;c=c.map(D);3<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,3));for(;3>c.length;)c.push(0);return c}function I(a,b){b=void 0===b?[.5,.5,.5]:b;if("number"===a.ctype){var c=J(0,1,a);if(!isNaN(c))return[c,c,c]}c=A(a);return null===c?b:3!=c.length?(console.log("Not an RGB color vector"),b):c.map(function(a){return J(0,1,a)})}
function D(a,b){b=void 0===b?Number.NaN:b;if("number"!==a.ctype)return console.log("argument is not a number"),b;var c=a.value,d=c.real;0!==c.imag&&console.log("complex number is not real");return d}function M(a,b){b=void 0===b?Number.NaN:b;if("number"!==a.ctype)return console.log("argument is not a number"),b;var c=a.value,d=c.real,c=c.imag;0!==c&&console.log("complex number is not real");c=Math.round(d);c!==d&&console.log("number is not an integer");return c}
function J(a,b,c,d){d=void 0===d?Number.NaN:d;c=D(c,d);return c<a?a:c>b?b:c}function N(a,b){b=void 0===b?null:b;if("string"===a.ctype)return a.value;console.log("argument is not a string");return b};function ia(){this.Z=[0,0,0];this.f=[new ma([0,0,0],[1,1,1],[1,1,1])];this.g=!1}function O(a,b,c){a.g=!c!==!a.f[b]||!!c&&a.f[b].f!==c.f;a.f[b]=c}function oa(a){for(var b="",c="",d=0;d<a.f.length;++d)a.f[d]&&(b+=pa(a.f[d],d),c+=qa(a.f[d],d));return b+"void lightScene() {\n"+c+"}"}function ra(a,b){this.f=a;this.g=b}ra.prototype.h={uDiffuse:"vec3",uSpecular:"vec3",uLightPos:"vec3",uLightDir:"vec3",uSpotDir:"vec3",uSpotCosCutoff:"float",uSpotExponent:"float"};
function qa(a,b){return"  "+a.f+"("+a.g.map(function(a){return a+b}).join(", ")+");\n"}function pa(a,b){return a.g.map(function(c){return"uniform "+a.h[c]+" "+c+b+";\n"}).join("")}function va(a,b,c){a.g.forEach(function(d){return b[d+c](a[d])})}function ma(a,b,c){this.uLightPos=a;this.uDiffuse=b;this.uSpecular=c}ma.prototype=new ra("pointLight",["uLightPos","uDiffuse","uSpecular"]);function wa(a,b,c){this.uLightDir=a;this.uDiffuse=b;this.uSpecular=c}
wa.prototype=new ra("directionalLight",["uLightDir","uDiffuse","uSpecular"]);function xa(a,b,c,d,g,h){this.uLightPos=a;this.uSpotDir=b;this.uSpotCosCutoff=[c];this.uSpotExponent=[d];this.uDiffuse=g;this.uSpecular=h}xa.prototype=new ra("spotLight","uLightPos uSpotDir uSpotCosCutoff uSpotExponent uDiffuse uSpecular".split(" "));createCindy.registerPlugin(1,"Cindy3D",function(a){function b(a,b){var c,d;for(c in a)(d=b[c])?d(l(a[c])):console.log("Modifier "+c+" not supported")}function c(a,c,d){d=void 0===d?null:d;var l=a.color,e=a.alpha,f=a.j,g=a.size;a={color:function(a){return l=I(a)},alpha:function(a){return e=J(0,1,a)},shininess:function(a){return f=J(0,128,a)},size:function(a){return g=.05*D(a)}};var k;if(d)for(k in d)a[k]=d[k];b(c,a);return{color:l,alpha:e,j:f,size:g}}function d(a){k.m.alpha=J(0,1,l(a[0]),1);return m}
function g(a,b,c,d,l){for(var e=0,f=1;f<a;++f){for(var k=1;k<b;++k)l(e,e+1,e+b+1,e+b),++e;c&&l(e,e+1-b,e+1,e+b);++e}if(d){for(a=1;a<b;++a)l(e,e+1,a,a-1),++e;c&&l(e,e+1-b,0,b-1)}}function h(a,b,c,d,e,l,f,h,m){var n;n=null===f?function(){return m.color}:"perface"===h?function(a){return f[a]}:function(a,b){return f[b]};g(a,b,c,d,function(a,b,c,d){var p;p=k.F;var f=[e[a],e[b],e[c],e[d]],g=[l[a],l[b],l[c],l[d]];a=[n(a,a),n(a,b),n(a,c),n(a,d)];3==f.length?p=ya(p,f[0],f[1],f[2],g[0],g[1],g[2],a[0],a[1],
a[2],m):(4==f.length?(ya(p,f[0],f[1],f[3],g[0],g[1],g[3],a[0],a[1],a[3],m),ya(p,f[3],f[1],f[2],g[3],g[1],g[2],a[3],a[1],a[2],m)):console.error("addPolygonWithNormalsAndColors not supported for more than 4 corners"),p=void 0);return p})}function e(a,b){function d(a,b){var c=t(r(a,ka),r(b,ka));C[0]+=c[0];C[1]+=c[1];C[2]+=c[2];++la}var e=M(l(a[0])),f=M(l(a[1])),n=A(l(a[2])).map(function(a){return B(a)}),ba="perface",ca="pervertex",z="open",R=null,ja=c(k.m,b,{normaltype:function(a){return ba=N(a,ba).toLowerCase()},
colortype:function(a){return ca=N(a,ca).toLowerCase()},topology:function(a){return z=N(a,ba).toLowerCase()},colors:function(a){return R=A(a).map(function(a){return I(a)})}});if(n.length!==e*f||null!==R&&R.length!==e*f)return m;var F="closerows"===z||"closeboth"===z,G="closecolumns"===z||"closeboth"===z,ka=null,C=null,la=0;if(4===a.length){var S=A(l(a[3])).map(function(a){return E(a)});if(S.length!==e*f)return m;h(e,f,F,G,n,S,R,ca,ja)}else if("pervertex"===ba){for(var S=Array(e*f),T=e*f,U=n.map(P),
K=0,na=0;K<e;++K)for(var L=0;L<f;++L){var H=na+T,ka=U[na],sa=U[(H-1)%T],ta=U[(H+1)%T],ua=U[(H-f)%T],H=U[(H+f)%T],C=[0,0,0],la=0;(G||0<K)&&(F||0<L)&&d(sa,ua);(G||K+1<e)&&(F||0<L)&&d(H,sa);(G||K+1<e)&&(F||L+1<f)&&d(ta,H);(G||0<K)&&(F||L+1<f)&&d(ua,ta);S[na++]=za(4/la,C)}h(e,f,F,G,n,S,R,ca,ja)}else g(e,f,F,G,function(a,b,c,d){return Aa(k.F,[n[a],n[b],n[c],n[d]],ja)});return m}var m=a.nada,l=a.evaluate,f=a.defineFunction,n={},k;f("begin3d",0,function(c,d){var e="Cindy3D",f={},l={};b(d,{name:function(a){return e=
N(a,e)},antialias:function(a){"boolean"===a.ctype?a=a.value:(console.log("argument is not boolean"),a=!1);return f.antialias=a},supersample:function(a){return l.ba=D(a,1)}});(k=n[e])||(n[e]=k=new Q(e,f,l,a.addAutoCleaningEventListener));k.clear();return m});f("end3d",0,function(){k.B();k=null;return m});f("gsave3d",0,function(){k.$.push({T:q(k.u),S:q(k.l),U:q(k.m)});return m});f("grestore3d",0,function(){var a=k.$;0<a.length?(a=a.pop(),k.u=a.T,k.l=a.S,k.m=a.U):(k.u=q(V.T),k.l=q(V.S),k.m=q(V.U));return m});
f("color3d",1,function(a){if(a=I(l(a[0]),null))k.u.color=a,k.l.color=a,k.m.color=a;return m});f("pointcolor3d",1,function(a){if(a=I(l(a[0]),null))k.u.color=a;return m});f("linecolor3d",1,function(a){if(a=I(l(a[0]),null))k.l.color=a;return m});f("surfacecolor3d",1,function(a){if(a=I(l(a[0]),null))k.m.color=a;return m});f("alpha3d",1,d);f("surfacealpha3d",1,d);f("shininess3d",1,function(a){a=J(0,128,l(a[0]));isNaN(a)||(k.u.j=a,k.l.j=a,k.m.j=a);return m});f("pointshininess3d",1,function(a){a=J(0,128,
l(a[0]));isNaN(a)||(k.u.j=a);return m});f("lineshininess3d",1,function(a){a=J(0,128,l(a[0]));isNaN(a)||(k.l.j=a);return m});f("surfaceshininess3d",1,function(a){a=J(0,128,l(a[0]));isNaN(a)||(k.m.j=a);return m});f("size3d",1,function(a){a=.05*D(l(a[0]),-1);0<=a&&(k.u.size=a,k.l.size=a);return m});f("pointsize3d",1,function(a){a=.05*D(l(a[0]),-1);0<=a&&(k.u.size=a);return m});f("linesize3d",1,function(a){a=.05*D(l(a[0]),-1);0<=a&&(k.l.size=a);return m});f("draw3d",1,function(a,b){var d=B(l(a[0])),e=
c(k.u,b);k.I.add(d,e.size,e);return m});f("draw3d",2,function(a,b){var d=B(l(a[0])),e=B(l(a[1])),f=c(k.l,b);k.G.add(d,e,f);return m});f("connect3d",1,function(a,b){var d=A(l(a[0])),e=c(k.l,b);if(2>d.length)return m;for(var f=B(d[0]),g=1;g<d.length;++g){var h=B(d[g]);k.G.add(f,h,e);f=h}return m});f("drawpoly3d",1,function(a,b){var d=A(l(a[0])),e=c(k.l,b);if(2>d.length)return m;for(var f=B(d[d.length-1]),g=0;g<d.length;++g){var h=B(d[g]);k.G.add(f,h,e);f=h}return m});f("fillpoly3d",1,function(a,b){var d=
A(l(a[0])),e=c(k.m,b);if(2>d.length)return m;d=d.map(function(a){return B(a)});Aa(k.F,d,e);return m});f("fillpoly3d",2,function(a,b){var d=A(l(a[0])),e=A(l(a[1])),f=c(k.m,b);if(2>d.length||d.length!=e.length)return m;d=d.map(function(a){return B(a)});e=e.map(function(a){return E(a)});Ba(k.F,d,e,f);return m});f("fillcircle3d",3,function(){return m});f("drawsphere3d",2,function(a,b){var d=B(l(a[0])),e=D(l(a[1])),f=c(k.m,b);k.I.add(d,e,f);return m});f("mesh3d",3,function(a,b){return e(a,b)});f("mesh3d",
4,function(a,b){return e(a,b)});f("background3d",1,function(a){if(a=I(l(a[0]),null))a.push(1),k.backgroundColor=a;return m});f("lookat3d",3,function(a){var b=B(l(a[0]),null),c=B(l(a[1]),null);a=E(l(a[2]),null);b&&c&&a&&fa(k.v,P(b),P(c),a);return m});f("fieldofview3d",1,function(a){a=J(1,179,l(a[0]),0);0<a&&(k.v.aa=a,ea(k.v));return m});f("depthrange3d",2,function(a){var b=D(l(a[0]),-1);a=D(l(a[1]),-1);0<=b&&a>b&&(k.v.W=b,k.v.V=a,ea(k.v));return m});f("renderhints3d",0,function(){return m});f("pointlight3d",
1,function(a,c){var d=M(l(a[0]),0),e=[0,0,0,1],f=[1,1,1],g=[1,1,1];b(c,{position:function(a){return e=B(a,e)},diffuse:function(a){return f=I(a,f)},specular:function(a){return g=I(a,g)}});O(k.w,d,new ma(P(e),f,g));return m});f("directionallight3d",1,function(a,c){var d=M(l(a[0]),0),e=[0,-1,0],f=[1,1,1],g=[1,1,1];b(c,{direction:function(a){return e=E(a,e)},diffuse:function(a){return f=I(a,f)},specular:function(a){return g=I(a,g)}});O(k.w,d,new wa(e,f,g));return m});f("spotlight3d",1,function(a,c){var d=
M(l(a[0]),0),e=[0,0,0,1],f=[0,-1,0],g=Math.PI/4,h=0,n=[1,1,1],z=[1,1,1];b(c,{position:function(a){return e=B(a,e)},direction:function(a){return f=E(a,f)},cutoffangle:function(a){return g=J(0,Math.PI,a,g)},exponent:function(a){return h=D(a,h)},diffuse:function(a){return n=I(a,n)},specular:function(a){return z=I(a,z)}});O(k.w,d,new xa(P(e),f,Math.cos(g),h,n,z));return m});f("disablelight3d",1,function(a){a=M(l(a[0]),0);O(k.w,a,null);return m});f("ambientlight3d",1,function(a){if(a=I(l(a[0])))k.w.Z=
a;return m})});function w(a,b){var c=a.length,d=b.length,g=Math.max.apply(null,b)+1;this.X=a;this.O=c;this.P=g;this.J=b;this.ea=d;this.g=4*g*c;this.R=16*c;this.M=c=g*this.R;this.N=c+2*d}function ha(a,b,c){a.Y=b;a.count=0;a.C=!0;a.f=16;a.i=new ArrayBuffer(16*a.N);a.o=new Float32Array(a.i,0,16*a.g);b=new Uint16Array(a.i,16*a.M);a.s=b;var d,g,h=0,e,m=a.J;for(d=0;16>d;++d)for(e=d*a.P,g=0;g<m.length;++g)b[h++]=m[g]+e;a.ca=c.f.createBuffer();a.da=c.f.createBuffer();a.L=-1;a.h=null;Ca(a,c)}
function Ca(a,b){var c=b.f;null!==a.h&&Da(a.h,c);var d=["precision mediump float;\nvarying float vShininess;",a.H].join("\n"),g=["precision mediump float;",b.N,a.A].join("\n");b.H&&(g="#extension GL_EXT_frag_depth : enable\n"+g);a.h=new Ea(c,d,g);var h=a.h.f;a.K=a.X.map(function(a){return c.getAttribLocation(h,a)})}
function x(a,b){if(b.length!==a.g)throw new W("Wrong number of attributes given");if(a.count==a.f){var c=2*a.f,d,g,h,e,m,l,f,n=a.J;d=new ArrayBuffer(c*a.N);g=new Float32Array(d,0,c*a.g);h=new Uint16Array(d,c*a.M);g.set(a.o);h.set(a.s);l=a.s.length;for(e=a.f;e<c;++e)for(f=e*a.P,m=0;m<n.length;++m)h[l++]=n[m]+f;a.f=c;a.i=d;a.o=g;a.s=h}a.o.set(b,a.count++*a.g)}
w.prototype.D=function(a,b){if(0!==this.count){var c=this.h,d=c.h;a.useProgram(c.f);b(d);a.bindBuffer(a.ARRAY_BUFFER,this.ca);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.da);this.L!==this.f?(a.bufferData(a.ARRAY_BUFFER,this.o,a.STATIC_DRAW),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.s,a.STATIC_DRAW),this.L=this.f):a.bufferSubData(a.ARRAY_BUFFER,0,new Float32Array(this.i,0,this.count*this.g));for(c=0;c<this.O;++c)d=this.K[c],a.enableVertexAttribArray(d),a.vertexAttribPointer(d,4,a.FLOAT,!1,this.R,16*c);
a.drawElements(this.Y,this.ea*this.count,a.UNSIGNED_SHORT,0);for(c=0;c<this.O;++c)a.disableVertexAttribArray(this.K[c])}};w.prototype.clear=function(){this.count=0;this.C=!0};function W(a){this.f=a}W.prototype.toString=function(){return this.f};
function Ea(a,b,c){this.f=a.createProgram();this.i=Fa(this,a,a.VERTEX_SHADER,b);this.g=Fa(this,a,a.FRAGMENT_SHADER,c);b=this.f;a.linkProgram(b);if(!a.getProgramParameter(b,a.LINK_STATUS))throw new W("Error linking shader:\n"+a.getProgramInfoLog(b));a.validateProgram(b);if(!a.getProgramParameter(b,a.VALIDATE_STATUS))throw new W("Error validating shader:\n"+a.getProgramInfoLog(b));var d=this.f,g,h,e,m={},l,f,n,k;c=a.getProgramParameter(d,a.ACTIVE_UNIFORMS);for(b=0;b<c;++b)if(g=a.getActiveUniform(d,
b),null!==g&&(h=g.name.replace(/\]/g,""))){for(l=m;null!==(e=/[.\[]/.exec(h));)f=h.substr(0,e.index),l.hasOwnProperty(f)?l=l[f]:"."===e[0]?l=l[f]={}:l=l[f]=[],h=h.substr(e.index+1);if(1<g.size){e=g.size;k=Array(e);for(f=0;f<e;++f)n=g.name+"["+f+"]",n=Ga(this,a,n,g),k[f]=n;l[h]=k}else n=Ga(this,a,g.name,g),l[h]=n}this.h=m}
function Fa(a,b,c,d){c=b.createShader(c);b.shaderSource(c,d);b.compileShader(c);if(!b.getShaderParameter(c,b.COMPILE_STATUS))throw console.warn(d.split("\n")),new W("Error compiling shader:\n"+b.getShaderInfoLog(c));b.attachShader(a.f,c);return c}function Da(a,b){b.detachShader(a.f,a.i);b.deleteShader(a.i);b.detachShader(a.f,a.g);b.deleteShader(a.g);b.deleteProgram(a.f)}
function Ga(a,b,c,d){a=b.getUniformLocation(a.f,c);switch(d.type){case b.FLOAT:return b.uniform1fv.bind(b,a);case b.FLOAT_VEC2:return b.uniform2fv.bind(b,a);case b.FLOAT_VEC3:return b.uniform3fv.bind(b,a);case b.FLOAT_VEC4:return b.uniform4fv.bind(b,a);case b.BOOL:case b.INT:case b.SAMPLER_2D:case b.SAMPLER_CUBE:return b.uniform1iv.bind(b,a);case b.BOOL_VEC2:case b.INT_VEC2:return b.uniform2iv.bind(b,a);case b.BOOL_VEC3:case b.INT_VEC3:return b.uniform3iv.bind(b,a);case b.BOOL_VEC4:case b.INT_VEC4:return b.uniform4iv.bind(b,
a);case b.FLOAT_MAT2:return b.uniformMatrix2fv.bind(b,a,!1);case b.FLOAT_MAT3:return b.uniformMatrix3fv.bind(b,a,!1);case b.FLOAT_MAT4:return b.uniformMatrix4fv.bind(b,a,!1);default:throw new W("Unknown data type for uniform "+c);}};function X(a){ha(this,a.f.TRIANGLES,a)}X.prototype=new w(["aCenter","aColor","aRelativeShininessRadius"],[0,1,2,2,1,3]);X.prototype.H="uniform mat4 uProjectionMatrix;\n\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aCenter;\n\nattribute vec4 aColor;\n\nattribute vec4 aRelativeShininessRadius;\n\nvarying vec3 vViewSpacePos;\n\nvarying vec3 vViewSpaceCenter;\n\nvarying vec4 vColor;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\n\nvec4 viewPosHom=uModelViewMatrix*aCenter;\nvViewSpaceCenter=viewPosHom.xyz/viewPosHom.w;\nvec3 dir=normalize(-vViewSpaceCenter);\nvec3 right=normalize(cross(dir,vec3(0,1,0)));\nvec3 up=normalize(cross(right,dir));\n\n\nvColor=aColor;\nvShininess=aRelativeShininessRadius.z;\nvRadius=aRelativeShininessRadius.w;\n\n\nvViewSpacePos=vViewSpaceCenter+\nvRadius*(right*aRelativeShininessRadius.x+\nup*aRelativeShininessRadius.y+dir);\n\n\ngl_Position=uProjectionMatrix*vec4(vViewSpacePos,1);\n}\n";
X.prototype.A="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\n\nuniform float sphereMode;\n\n\nvarying vec3 vViewSpacePos;\n\nvarying vec3 vViewSpaceCenter;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\nvec3 pointOnSphere=\nsphere(vViewSpacePos,vViewSpaceCenter,vRadius,sphereMode);\nvec3 normal=normalize(pointOnSphere-vViewSpaceCenter);\nfinish(pointOnSphere,normal);\n}\n";
X.prototype.add=function(a,b,c){var d=a[0],g=a[1],h=a[2];a=a[3];var e=c.color,m=c.j,l=e[0],f=e[1],e=e[2];c=c.alpha;1>c&&(this.C=!1);x(this,[d,g,h,a,l,f,e,c,1,1,m,b,d,g,h,a,l,f,e,c,-1,1,m,b,d,g,h,a,l,f,e,c,1,-1,m,b,d,g,h,a,l,f,e,c,-1,-1,m,b])};X.prototype.B=function(a,b){this.D(a.f,function(c){a.A(c);c.sphereMode([b])})};function Y(a){ha(this,a.f.TRIANGLES,a)}Y.prototype=new w(["aPos","aNormalAndShininess","aColor"],[0,1,2]);Y.prototype.H="uniform mat4 uProjectionMatrix;\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aPos;\nattribute vec4 aNormalAndShininess;\nattribute vec4 aColor;\n\nvarying vec4 vPos;\nvarying vec4 vNormal;\nvarying vec4 vColor;\n\nvoid main(){\nvPos=uModelViewMatrix*aPos;\ngl_Position=uProjectionMatrix*vPos;\nvNormal=uModelViewMatrix*vec4(aNormalAndShininess.xyz,0.0);\nvShininess=aNormalAndShininess.w;\nvColor=aColor;\n}\n";
Y.prototype.A="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\nvarying vec4 vPos;\nvarying vec4 vNormal;\n\nvoid main(){\nfinish(vPos.xyz/vPos.w,normalize(vNormal.xyz));\n}\n";
function Z(a,b,c,d,g,h,e,m){var l=m.color,f=m.j,n=l[0],k=l[1],l=l[2];m=m.alpha;1>m&&(a.C=!1);x(a,[b[0],b[1],b[2],b[3],g[0],g[1],g[2],f,n,k,l,m,c[0],c[1],c[2],c[3],h[0],h[1],h[2],f,n,k,l,m,d[0],d[1],d[2],d[3],e[0],e[1],e[2],f,n,k,l,m])}function ya(a,b,c,d,g,h,e,m,l,f,n){var k=n.j;n=n.alpha;1>n&&(a.C=!1);x(a,[b[0],b[1],b[2],b[3],g[0],g[1],g[2],k,m[0],m[1],m[2],n,c[0],c[1],c[2],c[3],h[0],h[1],h[2],k,l[0],l[1],l[2],n,d[0],d[1],d[2],d[3],e[0],e[1],e[2],k,f[0],f[1],f[2],n])}
function Aa(a,b,c){if(3==b.length){var d=b[0],g=b[1];b=b[2];var h=P(d),h=ga(t(r(P(g),h),r(P(b),h)));Z(a,d,g,b,h,h,h,c)}else{for(var d=b.length,e=Array(d+2),h=[0,0,0],g=0;g<d;++g)e[g]=P(b[g]);e[d]=e[0];e[d+1]=e[1];for(g=1;g<=d;++g)h=Ha(h,t(r(e[g],e[g-1]),r(e[g],e[g+1])));if(4==d)Z(a,b[0],b[1],b[3],h,h,h,c),Z(a,b[3],b[1],b[2],h,h,h,c);else{for(var e=[0,0,0,0],m=b[d-1],g=0;g<d;++g)e=Ia(e,b[g]);for(g=0;g<d;++g)Z(a,m,b[g],e,h,h,h,c),m=b[g]}}}
function Ba(a,b,c,d){if(3==b.length)Z(a,b[0],b[1],b[2],c[0],c[1],c[2],d);else if(4==b.length)Z(a,b[0],b[1],b[3],c[0],c[1],c[3],d),Z(a,b[3],b[1],b[2],c[3],c[1],c[2],d);else{var g=b.length,h,e=[0,0,0,0],m=[0,0,0];for(h=0;h<g;++h)e=Ia(e,b[h]),m=Ha(m,c[h]);var l=b[g-1],f=c[g-1];for(h=0;h<g;++h)Z(a,l,b[h],e,f,c[h],m,d),l=b[h],f=c[h]}}Y.prototype.B=function(a){this.D(a.f,a.A.bind(a))};function ga(a){var b=a[0],c=a[1];a=a[2];var d=1/Math.sqrt(b*b+c*c+a*a);return[d*b,d*c,d*a]}function P(a){var b=1/a[3];return[b*a[0],b*a[1],b*a[2]]}function za(a,b){return[a*b[0],a*b[1],a*b[2]]}function r(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]}function Ha(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2]]}function Ia(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]}function t(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}
function u(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+
a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]]};function Q(a,b,c,d){function g(a){h.removeEventListener("webglcontextcreationerror",g,!1);a.statusMessage&&(e=a.statusMessage)}var h=document.getElementById(a);if(!h)throw new W("No canvas element with id "+a);var e="Unknown";h.addEventListener("webglcontextcreationerror",g,!1);(a=h.getContext("webgl",b))||(a=h.getContext("experimental-webgl",b));if(!a)throw new W("Could not obtain a WebGL context.\nReason: "+e);h.removeEventListener("webglcontextcreationerror",g,!1);a.depthFunc(a.LEQUAL);a.blendFunc(a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);this.X=h;this.i=h.width;this.h=h.height;this.f=a;/[?&]frag_depth=0/.test(window.location.search)?this.H=null:(this.H=a.getExtension("EXT_frag_depth"))||console.log("EXT_frag_depth extension not supported, will render with reduced quality.");this.g=1;c&&c.ba&&(this.g=c.ba|0,1>this.g&&(this.g=1));if(1!==this.g){b=this.i*this.h*this.g;for(c=64;c*c<b;)c*=2;this.s=this.o=c;this.K=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.K);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.hint(a.GENERATE_MIPMAP_HINT,a.NICEST);a.texImage2D(a.TEXTURE_2D,0,a.RGB,this.s,this.o,0,a.RGB,a.UNSIGNED_BYTE,null);a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null);this.P=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,this.P);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.s,this.o);a.bindRenderbuffer(a.RENDERBUFFER,null);this.R=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,
this.R);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.K,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this.P);b=a.checkFramebufferStatus(a.FRAMEBUFFER);if(b!==a.FRAMEBUFFER_COMPLETE)throw new W("Failed to create supersampling framebuffer. glCheckFramebufferStatus returned "+b);a.bindFramebuffer(a.FRAMEBUFFER,null);this.O=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.O);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,1,1,1,-1,1,0,1,1,
-1,1,0,-1,-1,0,0]),a.STATIC_DRAW);this.M=new Ea(a,"precision mediump float;\n\nattribute vec4 aPos;\nvarying vec2 vPos;\n\nvoid main(){\nvPos=aPos.zw;\ngl_Position=vec4(aPos.xy,0,1);\n}\n","precision mediump float;\n\nuniform sampler2D uTexture;\nvarying vec2 vPos;\n\nvoid main(){\ngl_FragColor=texture2D(uTexture,vPos);\n}\n");this.L=a.getAttribLocation(this.M.f,"aPos")}else this.s=this.i,this.o=this.h;this.w=new ia;this.N="uniform vec3 uAmbient;\n\nvarying vec4 vColor;\nvarying float vShininess;\n\nvec3 gPos;\nvec3 gEye;\nvec3 gNormal;\nvec3 gAccumDiffuse;\nvec3 gAccumSpecular;\n\nvoid commonLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\n\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=diffuse*diffuseDot;\ngAccumSpecular+=specular*specFactor;\n}\n\nvoid pointLight(in vec3 lightPos,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightPos-gPos),diffuse,specular);\n}\n\nvoid directionalLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightDir),diffuse,specular);\n}\n\nvoid spotLight(in vec3 lightPos,in vec3 spotDir,\nin float spotCosCutoff,in float spotExponent,\nin vec3 diffuse,in vec3 specular){\nvec3 lightDir;\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\nfloat spotCosAngle;\nfloat spotAttenuation;\n\nlightDir=normalize(lightPos-gPos);\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\nspotCosAngle=dot(-lightDir,normalize(spotDir));\nspotAttenuation=\nstep(spotCosCutoff,spotCosAngle) *pow(spotCosAngle,spotExponent);\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=spotAttenuation*diffuse*diffuseDot;\ngAccumSpecular+=spotAttenuation*specular*specFactor;\n}\n"+
oa(this.w)+"\n\n\n\n\n\nvoid shade(in vec3 position,in vec3 normal){\n\ngAccumDiffuse=vec3(0.0);\ngAccumSpecular=vec3(0.0);\n\n\ngPos=position;\ngEye= -normalize(position);\ngNormal=sign(dot(gEye,normal))*normal;\n\n\nlightScene();\n\n\n\nvec3 color= (uAmbient+gAccumDiffuse) *vColor.xyz\n+gAccumSpecular;\n\ncolor=clamp(color,0.0,1.0);\ngl_FragColor=vec4(color.xyz,vColor.w);\n}\n";this.v=new da(this.i,this.h);this.I=new X(this);this.G=new v(this);this.F=new Y(this);this.u=q(V.T);this.l=q(V.S);this.m=
q(V.U);this.$=[];this.backgroundColor=[1,1,1,1];this.J=null;d||(d=function(a,b,c,d){a.addEventListener(b,c,!!d)});Ja(this,d)}var V={T:q(aa([1,0,0])),S:q(aa([0,0,1])),U:q(aa([0,1,0]))};
function Ja(a,b){var c=a.X,d=Number.NaN,g=Number.NaN,h=!1,e=a.v,m=a.Y.bind(a);b(c,"mousedown",function(a){0===a.button&&(h=!0);if(void 0===a.buttons?h:a.buttons&1)d=a.screenX,g=a.screenY});b(c,"mousemove",function(a){if(void 0===a.buttons?h:a.buttons&1){if(!isNaN(d)){var b=a.screenX-d,c=a.screenY-g;if(a.shiftKey){var k=-.01*b,p=-.01*c,c=Math.cos(k),b=Math.cos(p),k=Math.sin(k),p=Math.sin(p),y=[1,0,0,0,0,1,0,0,0,0,1,e.h,0,0,0,1];e.g=u(u([c,0,k,0,0,1,0,0,-k,0,c,0,0,0,0,1],[1,0,0,0,0,b,-p,0,0,p,b,0,0,
0,0,1]),e.g);e.f=u(y,e.g)}else a.altKey||a.ctrlKey||a.metaKey?(k=.002*e.h,e.f=u([1,0,0,k*b,0,1,0,-k*c,0,0,1,0,0,0,0,1],e.f)):(k=.01*b,p=.01*c,c=Math.cos(k),b=Math.cos(p),k=Math.sin(k),p=Math.sin(p),e.f=u(u([c,0,k,0,0,1,0,0,-k,0,c,0,0,0,0,1],[1,0,0,0,0,b,-p,0,0,p,b,0,0,0,0,1]),e.f)),e.g=u(e.i,e.f);m()}d=a.screenX;g=a.screenY}});b(c,"mouseup",function(a){0===a.button&&(h=!1)});b(c,"mouseleave",function(){h=!1;d=g=Number.NaN});b(c,"wheel",function(a){var b=a.deltaY;if(b){if(a.shiftKey){var c=-.01*b,
b=Math.cos(c),c=Math.sin(c);e.f=u([b,-c,0,0,c,b,0,0,0,0,1,0,0,0,0,1],e.f);e.g=u(e.i,e.f)}else a.altKey||a.ctrlKey||a.metaKey?(e.f=u([1,0,0,0,0,1,0,0,0,0,1,-.02*e.h*b,0,0,0,1],e.f),e.g=u(e.i,e.f)):(e.h*=Math.pow(1.01,b),e.i=[1,0,0,0,0,1,0,0,0,0,1,-e.h,0,0,0,1],e.g=u(e.i,e.f));m()}a.preventDefault()})}Q.prototype.clear=function(){this.I.clear();this.G.clear();this.F.clear()};Q.prototype.Y=function(){null===this.J&&(this.J=setTimeout(this.B.bind(this),0))};
Q.prototype.B=function(){this.J=null;this.w.g&&(this.N="uniform vec3 uAmbient;\n\nvarying vec4 vColor;\nvarying float vShininess;\n\nvec3 gPos;\nvec3 gEye;\nvec3 gNormal;\nvec3 gAccumDiffuse;\nvec3 gAccumSpecular;\n\nvoid commonLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\n\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=diffuse*diffuseDot;\ngAccumSpecular+=specular*specFactor;\n}\n\nvoid pointLight(in vec3 lightPos,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightPos-gPos),diffuse,specular);\n}\n\nvoid directionalLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightDir),diffuse,specular);\n}\n\nvoid spotLight(in vec3 lightPos,in vec3 spotDir,\nin float spotCosCutoff,in float spotExponent,\nin vec3 diffuse,in vec3 specular){\nvec3 lightDir;\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\nfloat spotCosAngle;\nfloat spotAttenuation;\n\nlightDir=normalize(lightPos-gPos);\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\nspotCosAngle=dot(-lightDir,normalize(spotDir));\nspotAttenuation=\nstep(spotCosCutoff,spotCosAngle) *pow(spotCosAngle,spotExponent);\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=spotAttenuation*diffuse*diffuseDot;\ngAccumSpecular+=spotAttenuation*specular*specFactor;\n}\n"+
oa(this.w)+"\n\n\n\n\n\nvoid shade(in vec3 position,in vec3 normal){\n\ngAccumDiffuse=vec3(0.0);\ngAccumSpecular=vec3(0.0);\n\n\ngPos=position;\ngEye= -normalize(position);\ngNormal=sign(dot(gEye,normal))*normal;\n\n\nlightScene();\n\n\n\nvec3 color= (uAmbient+gAccumDiffuse) *vColor.xyz\n+gAccumSpecular;\n\ncolor=clamp(color,0.0,1.0);\ngl_FragColor=vec4(color.xyz,vColor.w);\n}\n",Ca(this.I,this),Ca(this.G,this),Ca(this.F,this));if(1===this.g)Ka(this);else{var a=this.f;a.bindFramebuffer(a.FRAMEBUFFER,
this.R);Ka(this);a.bindFramebuffer(a.FRAMEBUFFER,null);a.viewport(0,0,this.i,this.h);a.disable(a.DEPTH_TEST);a.bindTexture(a.TEXTURE_2D,this.K);a.generateMipmap(a.TEXTURE_2D);a.bindBuffer(a.ARRAY_BUFFER,this.O);a.enableVertexAttribArray(this.L);a.vertexAttribPointer(this.L,4,a.FLOAT,!1,16,0);a.useProgram(this.M.f);this.M.h.uTexture([0]);a.drawArrays(a.TRIANGLE_STRIP,0,4);a.disableVertexAttribArray(this.L);a.bindTexture(a.TEXTURE_2D,null)}this.f.flush()};
function Ka(a){var b=a.f;b.viewport(0,0,a.s,a.o);b.clearColor.apply(b,a.backgroundColor);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.I.C&&a.G.C&&a.F.C?(b.disable(b.BLEND),b.depthMask(!0),b.enable(b.DEPTH_TEST),a.D(!0)):(b.disable(b.DEPTH_TEST),b.enable(b.BLEND),b.depthMask(!1),a.D(!1),a.D(!1),b.depthMask(!0),b.enable(b.DEPTH_TEST),a.D(!1))}Q.prototype.D=function(a){a||this.I.B(this,1);this.F.B(this);this.G.B(this);this.I.B(this,-1)};
Q.prototype.A=function(a){a.uProjectionMatrix(this.v.A);var b=this.v.g;a.uModelViewMatrix([b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]]);b=this.w;a.uAmbient(b.Z);for(var c=0;c<b.f.length;++c)b.f[c]&&va(b.f[c],a,c)};
})();//# sourceMappingURL=Cindy3D.js.map

