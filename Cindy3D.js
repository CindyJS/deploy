(function(){
'use strict';function q(a){this.message=a}q.prototype.toString=function(){return this.message};
function ba(a,b,c){this.handle=a.createProgram();this.oa=this.createShader(a,a.VERTEX_SHADER,b);this.ba=this.createShader(a,a.FRAGMENT_SHADER,c);this.link(a);b=void 0;var d=this.handle,e,f=void 0,k,n={},l,h,g;k=void 0;var p;c=a.getProgramParameter(d,a.ACTIVE_UNIFORMS);for(b=0;b<c;++b)if(e=a.getActiveUniform(d,b),null!==e&&(f=e.name.replace(/\]/g,""))){for(l=n;null!==(k=/[.\[]/.exec(f));)h=f.substr(0,k.index),l=l.hasOwnProperty(h)?l[h]:"."===k[0]?l[h]={}:l[h]=[],f=f.substr(k.index+1);if(1<e.size){k=
e.size;p=Array(k);for(h=0;h<k;++h)g=e.name+"["+h+"]",g=ca(this,a,g,e),p[h]=g;l[f]=p}else g=ca(this,a,e.name,e),l[f]=g}this.ma=n}ba.prototype.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);if(!a.getShaderParameter(b,a.COMPILE_STATUS))throw console.warn(c.split("\n")),new q("Error compiling shader:\n"+a.getShaderInfoLog(b));a.attachShader(this.handle,b);return b};
ba.prototype.link=function(a){var b=this.handle;a.linkProgram(b);if(!a.getProgramParameter(b,a.LINK_STATUS))throw new q("Error linking shader:\n"+a.getProgramInfoLog(b));a.validateProgram(b);if(!a.getProgramParameter(b,a.VALIDATE_STATUS))throw new q("Error validating shader:\n"+a.getProgramInfoLog(b));};function da(a,b){b.detachShader(a.handle,a.oa);b.deleteShader(a.oa);b.detachShader(a.handle,a.ba);b.deleteShader(a.ba);b.deleteProgram(a.handle)}
function ca(a,b,c,d){a=b.getUniformLocation(a.handle,c);switch(d.type){case b.FLOAT:return b.uniform1fv.bind(b,a);case b.FLOAT_VEC2:return b.uniform2fv.bind(b,a);case b.FLOAT_VEC3:return b.uniform3fv.bind(b,a);case b.FLOAT_VEC4:return b.uniform4fv.bind(b,a);case b.BOOL:case b.INT:case b.SAMPLER_2D:case b.SAMPLER_CUBE:return b.uniform1iv.bind(b,a);case b.BOOL_VEC2:case b.INT_VEC2:return b.uniform2iv.bind(b,a);case b.BOOL_VEC3:case b.INT_VEC3:return b.uniform3iv.bind(b,a);case b.BOOL_VEC4:case b.INT_VEC4:return b.uniform4iv.bind(b,
a);case b.FLOAT_MAT2:return b.uniformMatrix2fv.bind(b,a,!1);case b.FLOAT_MAT3:return b.uniformMatrix3fv.bind(b,a,!1);case b.FLOAT_MAT4:return b.uniformMatrix4fv.bind(b,a,!1);default:throw new q("Unknown data type for uniform "+c);}};function ea(a){var b=a[0],c=a[1];a=a[2];var d=1/Math.sqrt(b*b+c*c+a*a);return[d*b,d*c,d*a]}function r(a){var b=1/a[3];return[b*a[0],b*a[1],b*a[2]]}function fa(a,b){return[a*b[0],a*b[1],a*b[2]]}function t(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]}function ga(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2]]}function ha(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]}function ia(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}
function u(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+
a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]]};function ja(a,b){this.width=a;this.height=b;this.aa=45;this.O=.1;this.N=100;ka(this);la(this,[0,0,5],[0,0,0],[0,1,0])}function ka(a){var b=1/Math.tan(Math.PI/360*a.aa),c=a.O-a.N;a.ta=[b*a.height/a.width,0,0,0,0,b,0,0,0,0,(a.N+a.O)/c,-1,0,0,2*a.N*a.O/c,0]}
function la(a,b,c,d){b=t(b,c);var e=b[0],f=b[1],k=b[2];a.v=Math.sqrt(e*e+f*f+k*k);b=ea(b);d=ea(d);e=ia(d,b);d=[e[0],d[0],b[0],e[1],d[1],b[1],e[2],d[2],b[2]];d=[d[4]*d[8]-d[5]*d[7],d[2]*d[7]-d[1]*d[8],d[1]*d[5]-d[2]*d[4],d[5]*d[6]-d[3]*d[8],d[0]*d[8]-d[2]*d[6],d[2]*d[3]-d[0]*d[5],d[3]*d[7]-d[4]*d[6],d[1]*d[6]-d[0]*d[7],d[0]*d[4]-d[1]*d[3]];c=[d[0]*c[0]+d[1]*c[1]+d[2]*c[2],d[3]*c[0]+d[4]*c[1]+d[5]*c[2],d[6]*c[0]+d[7]*c[1]+d[8]*c[2]];a.f=[d[0],d[1],d[2],-c[0],d[3],d[4],d[5],-c[1],d[6],d[7],d[8],-c[2],
0,0,0,1];a.B=[1,0,0,0,0,1,0,0,0,0,1,-a.v,0,0,0,1];a.p=u(a.B,a.f)}ja.prototype.zoom=function(a){this.v*=Math.pow(1.01,a);this.B=[1,0,0,0,0,1,0,0,0,0,1,-this.v,0,0,0,1];this.p=u(this.B,this.f)};function ma(a){return{color:a,alpha:1,g:60,size:.05}}function v(a){return{color:a.color,alpha:a.alpha,g:a.g,size:a.size}};function w(a,b,c,d){function e(a){f.removeEventListener("webglcontextcreationerror",e,!1);a.statusMessage&&(k=a.statusMessage)}var f=document.getElementById(a);if(!f)throw new q("No canvas element with id "+a);var k="Unknown";f.addEventListener("webglcontextcreationerror",e,!1);(a=f.getContext("webgl",b))||(a=f.getContext("experimental-webgl",b));if(!a)throw new q("Could not obtain a WebGL context.\nReason: "+k);f.removeEventListener("webglcontextcreationerror",e,!1);a.depthFunc(a.LEQUAL);a.blendFunc(a.SRC_ALPHA,
a.ONE_MINUS_SRC_ALPHA);this.canvas=f;this.width=f.width;this.height=f.height;this.h=a;/[?&]frag_depth=0/.test(window.location.search)?this.R=null:(this.R=a.getExtension("EXT_frag_depth"))||console.log("EXT_frag_depth extension not supported, will render with reduced quality.");this.A=1;c&&c.la&&(this.A=c.la|0,1>this.A&&(this.A=1));if(1!==this.A){b=this.width*this.height*this.A;for(c=64;c*c<b;)c*=2;this.L=this.K=c;this.T=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.T);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);a.hint(a.GENERATE_MIPMAP_HINT,a.NICEST);a.texImage2D(a.TEXTURE_2D,0,a.RGB,this.L,this.K,0,a.RGB,a.UNSIGNED_BYTE,null);a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null);this.ja=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,this.ja);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,this.L,this.K);a.bindRenderbuffer(a.RENDERBUFFER,null);this.ka=a.createFramebuffer();
a.bindFramebuffer(a.FRAMEBUFFER,this.ka);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.T,0);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this.ja);b=a.checkFramebufferStatus(a.FRAMEBUFFER);if(b!==a.FRAMEBUFFER_COMPLETE)throw new q("Failed to create supersampling framebuffer. glCheckFramebufferStatus returned "+b);a.bindFramebuffer(a.FRAMEBUFFER,null);this.ia=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.ia);a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,
1,1,1,-1,1,0,1,1,-1,1,0,-1,-1,0,0]),a.STATIC_DRAW);this.V=new ba(a,"precision mediump float;\n\nattribute vec4 aPos;\nvarying vec2 vPos;\n\nvoid main(){\nvPos=aPos.zw;\ngl_Position=vec4(aPos.xy,0,1);\n}\n","precision mediump float;\n\nuniform sampler2D uTexture;\nvarying vec2 vPos;\n\nvoid main(){\ngl_FragColor=texture2D(uTexture,vPos);\n}\n");this.U=a.getAttribLocation(this.V.handle,"aPos")}else this.L=this.width,this.K=this.height;this.n=new na;this.ea="uniform vec3 uAmbient;\n\nvarying vec4 vColor;\nvarying float vShininess;\n\nvec3 gPos;\nvec3 gEye;\nvec3 gNormal;\nvec3 gAccumDiffuse;\nvec3 gAccumSpecular;\n\nvoid commonLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\n\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=diffuse*diffuseDot;\ngAccumSpecular+=specular*specFactor;\n}\n\nvoid pointLight(in vec3 lightPos,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightPos-gPos),diffuse,specular);\n}\n\nvoid directionalLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightDir),diffuse,specular);\n}\n\nvoid spotLight(in vec3 lightPos,in vec3 spotDir,\nin float spotCosCutoff,in float spotExponent,\nin vec3 diffuse,in vec3 specular){\nvec3 lightDir;\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\nfloat spotCosAngle;\nfloat spotAttenuation;\n\nlightDir=normalize(lightPos-gPos);\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\nspotCosAngle=dot(-lightDir,normalize(spotDir));\nspotAttenuation=\nstep(spotCosCutoff,spotCosAngle) *pow(spotCosAngle,spotExponent);\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=spotAttenuation*diffuse*diffuseDot;\ngAccumSpecular+=spotAttenuation*specular*specFactor;\n}\n"+
this.n.J()+"\n\n\n\n\n\nvoid shade(in vec3 position,in vec3 normal){\n\ngAccumDiffuse=vec3(0.0);\ngAccumSpecular=vec3(0.0);\n\n\ngPos=position;\ngEye= -normalize(position);\ngNormal=sign(dot(gEye,normal))*normal;\n\n\nlightScene();\n\n\n\nvec3 color= (uAmbient+gAccumDiffuse) *vColor.xyz\n+gAccumSpecular;\n\ncolor=clamp(color,0.0,1.0);\ngl_FragColor=vec4(color.xyz,vColor.w);\n}\n";this.m=new ja(this.width,this.height);this.u=new x(this);this.s=new z(this);this.e=new A(this);this.l=v(D.I);this.i=v(D.H);
this.j=v(D.M);this.Y=[];this.backgroundColor=[1,1,1,1];this.S=null;d||(d=function(a,b,c,d){a.addEventListener(b,c,!!d)});oa(this,d)}var D={I:v(ma([1,0,0])),H:v(ma([0,0,1])),M:v(ma([0,1,0]))};
function oa(a,b){var c=a.canvas,d=Number.NaN,e=Number.NaN,f=!1,k=a.m,n=a.ua.bind(a);b(c,"mousedown",function(a){0===a.button&&(f=!0);if(void 0===a.buttons?f:a.buttons&1)d=a.screenX,e=a.screenY});b(c,"mousemove",function(a){if(void 0===a.buttons?f:a.buttons&1){if(!isNaN(d)){var b=a.screenX-d,c=a.screenY-e;if(a.shiftKey){var p=-.01*b,m=-.01*c,c=Math.cos(p),b=Math.cos(m),p=Math.sin(p),m=Math.sin(m),y=[1,0,0,0,0,1,0,0,0,0,1,k.v,0,0,0,1];k.p=u(u([c,0,p,0,0,1,0,0,-p,0,c,0,0,0,0,1],[1,0,0,0,0,b,-m,0,0,m,
b,0,0,0,0,1]),k.p);k.f=u(y,k.p)}else a.altKey||a.ctrlKey||a.metaKey?(p=.002*k.v,k.f=u([1,0,0,p*b,0,1,0,-p*c,0,0,1,0,0,0,0,1],k.f)):(p=.01*b,m=.01*c,c=Math.cos(p),b=Math.cos(m),p=Math.sin(p),m=Math.sin(m),k.f=u(u([c,0,p,0,0,1,0,0,-p,0,c,0,0,0,0,1],[1,0,0,0,0,b,-m,0,0,m,b,0,0,0,0,1]),k.f)),k.p=u(k.B,k.f);n()}d=a.screenX;e=a.screenY}});b(c,"mouseup",function(a){0===a.button&&(f=!1)});b(c,"mouseleave",function(){f=!1;d=e=Number.NaN});b(c,"wheel",function(a){var b=a.deltaY;if(b){if(a.shiftKey){var c=-.01*
b,b=Math.cos(c),c=Math.sin(c);k.f=u([b,-c,0,0,c,b,0,0,0,0,1,0,0,0,0,1],k.f);k.p=u(k.B,k.f)}else a.altKey||a.ctrlKey||a.metaKey?(k.f=u([1,0,0,0,0,1,0,0,0,0,1,-.02*k.v*b,0,0,0,1],k.f),k.p=u(k.B,k.f)):k.zoom(b);n()}a.preventDefault()})}w.prototype.clear=function(){this.u.clear();this.s.clear();this.e.clear()};w.prototype.ua=function(){null===this.S&&(this.S=setTimeout(this.o.bind(this),0))};
w.prototype.o=function(){this.S=null;this.n.fa&&(this.ea="uniform vec3 uAmbient;\n\nvarying vec4 vColor;\nvarying float vShininess;\n\nvec3 gPos;\nvec3 gEye;\nvec3 gNormal;\nvec3 gAccumDiffuse;\nvec3 gAccumSpecular;\n\nvoid commonLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\n\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=diffuse*diffuseDot;\ngAccumSpecular+=specular*specFactor;\n}\n\nvoid pointLight(in vec3 lightPos,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightPos-gPos),diffuse,specular);\n}\n\nvoid directionalLight(in vec3 lightDir,in vec3 diffuse,in vec3 specular){\ncommonLight(normalize(lightDir),diffuse,specular);\n}\n\nvoid spotLight(in vec3 lightPos,in vec3 spotDir,\nin float spotCosCutoff,in float spotExponent,\nin vec3 diffuse,in vec3 specular){\nvec3 lightDir;\nvec3 halfVector;\nfloat diffuseDot;\nfloat specularDot;\nfloat specFactor;\nfloat spotCosAngle;\nfloat spotAttenuation;\n\nlightDir=normalize(lightPos-gPos);\nhalfVector=normalize(lightDir+gEye);\ndiffuseDot=max(0.0,dot(gNormal,lightDir));\nspecularDot=max(0.0,dot(gNormal,halfVector));\n\nspotCosAngle=dot(-lightDir,normalize(spotDir));\nspotAttenuation=\nstep(spotCosCutoff,spotCosAngle) *pow(spotCosAngle,spotExponent);\n\n\nif(diffuseDot==0.0)\nspecFactor=0.0;\nelse\nspecFactor=pow(specularDot,vShininess);\n\n\ngAccumDiffuse +=spotAttenuation*diffuse*diffuseDot;\ngAccumSpecular+=spotAttenuation*specular*specFactor;\n}\n"+this.n.J()+
"\n\n\n\n\n\nvoid shade(in vec3 position,in vec3 normal){\n\ngAccumDiffuse=vec3(0.0);\ngAccumSpecular=vec3(0.0);\n\n\ngPos=position;\ngEye= -normalize(position);\ngNormal=sign(dot(gEye,normal))*normal;\n\n\nlightScene();\n\n\n\nvec3 color= (uAmbient+gAccumDiffuse) *vColor.xyz\n+gAccumSpecular;\n\ncolor=clamp(color,0.0,1.0);\ngl_FragColor=vec4(color.xyz,vColor.w);\n}\n",sa(this.u,this),sa(this.s,this),sa(this.e,this));if(1===this.A)ta(this);else{var a=this.h;a.bindFramebuffer(a.FRAMEBUFFER,this.ka);
ta(this);a.bindFramebuffer(a.FRAMEBUFFER,null);a.viewport(0,0,this.width,this.height);a.disable(a.DEPTH_TEST);a.bindTexture(a.TEXTURE_2D,this.T);a.generateMipmap(a.TEXTURE_2D);a.bindBuffer(a.ARRAY_BUFFER,this.ia);a.enableVertexAttribArray(this.U);a.vertexAttribPointer(this.U,4,a.FLOAT,!1,16,0);a.useProgram(this.V.handle);this.V.ma.uTexture([0]);a.drawArrays(a.TRIANGLE_STRIP,0,4);a.disableVertexAttribArray(this.U);a.bindTexture(a.TEXTURE_2D,null)}this.h.flush()};
function ta(a){var b=a.h;b.viewport(0,0,a.L,a.K);b.clearColor.apply(b,a.backgroundColor);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);a.u.q&&a.s.q&&a.e.q?(b.disable(b.BLEND),b.depthMask(!0),b.enable(b.DEPTH_TEST),a.r(!0)):(b.disable(b.DEPTH_TEST),b.enable(b.BLEND),b.depthMask(!1),a.r(!1),a.r(!1),b.depthMask(!0),b.enable(b.DEPTH_TEST),a.r(!1))}w.prototype.r=function(a){a||this.u.o(this,1);this.e.o(this);this.s.o(this);this.u.o(this,-1)};
w.prototype.t=function(a){a.uProjectionMatrix(this.m.ta);var b=this.m.p;a.uModelViewMatrix([b[0],b[4],b[8],b[12],b[1],b[5],b[9],b[13],b[2],b[6],b[10],b[14],b[3],b[7],b[11],b[15]]);this.n.t(a)};function na(){this.X=[0,0,0];this.k=[new ua([0,0,0],[1,1,1],[1,1,1])];this.fa=!1}function va(a,b,c){a.fa=!c!==!a.k[b]||!!c&&a.k[b].type!==c.type;a.k[b]=c}na.prototype.J=function(){for(var a="",b="",c=0;c<this.k.length;++c)this.k[c]&&(a+=wa(this.k[c],c),b+=this.k[c].J(c));return a+"void lightScene() {\n"+b+"}"};na.prototype.t=function(a){a.uAmbient(this.X);for(var b=0;b<this.k.length;++b)this.k[b]&&this.k[b].t(a,b)};function F(a,b){this.type=a;this.P=b}
F.prototype.va={uDiffuse:"vec3",uSpecular:"vec3",uLightPos:"vec3",uLightDir:"vec3",uSpotDir:"vec3",uSpotCosCutoff:"float",uSpotExponent:"float"};F.prototype.J=function(a){return"  "+this.type+"("+this.P.map(function(b){return b+a}).join(", ")+");\n"};function wa(a,b){return a.P.map(function(c){return"uniform "+a.va[c]+" "+c+b+";\n"}).join("")}F.prototype.t=function(a,b){var c=this;this.P.forEach(function(d){return a[d+b](c[d])})};
function ua(a,b,c){this.uLightPos=a;this.uDiffuse=b;this.uSpecular=c}ua.prototype=new F("pointLight",["uLightPos","uDiffuse","uSpecular"]);function xa(a,b,c){this.uLightDir=a;this.uDiffuse=b;this.uSpecular=c}xa.prototype=new F("directionalLight",["uLightDir","uDiffuse","uSpecular"]);function ya(a,b,c,d,e,f){this.uLightPos=a;this.uSpotDir=b;this.uSpotCosCutoff=[c];this.uSpotExponent=[d];this.uDiffuse=e;this.uSpecular=f}ya.prototype=new F("spotLight","uLightPos uSpotDir uSpotCosCutoff uSpotExponent uDiffuse uSpecular".split(" "));function G(a,b){var c=a.length,d=b.length,e=Math.max.apply(null,b)+1;this.attributes=a;this.ga=c;this.ha=e;this.elements=b;this.sa=d;this.C=4*e*c;this.na=16*c;this.ca=c=e*this.na;this.da=c+2*d}G.prototype.ra=16;G.prototype.wa=!0;
function za(a,b,c){var d=a.ra;a.mode=b;a.count=0;a.q=!0;a.w=d;a.data=new ArrayBuffer(d*a.da);a.F=new Float32Array(a.data,0,d*a.C);b=new Uint16Array(a.data,d*a.ca);a.G=b;for(var e=void 0,f,k=0,n,l=a.elements,e=0;e<d;++e)for(n=e*a.ha,f=0;f<l.length;++f)b[k++]=l[f]+n;a.pa=c.h.createBuffer();a.qa=c.h.createBuffer();a.$=-1;a.D=null;sa(a,c)}
function sa(a,b){var c=b.h;null!==a.D&&da(a.D,c);var d=["precision mediump float;\nvarying float vShininess;",a.W].join("\n"),e=["precision mediump float;",b.ea,a.Q].join("\n");a.wa&&b.R&&(e="#extension GL_EXT_frag_depth : enable\n"+e);a.D=new ba(c,d,e);var f=a.D.handle;a.Z=a.attributes.map(function(a){return c.getAttribLocation(f,a)})}
function Ea(a,b){if(b.length!==a.C)throw new q("Wrong number of attributes given");if(a.count==a.w){var c=2*a.w,d,e,f,k,n,l,h,g=a.elements;d=new ArrayBuffer(c*a.da);e=new Float32Array(d,0,c*a.C);f=new Uint16Array(d,c*a.ca);e.set(a.F);f.set(a.G);l=a.G.length;for(k=a.w;k<c;++k)for(h=k*a.ha,n=0;n<g.length;++n)f[l++]=g[n]+h;a.w=c;a.data=d;a.F=e;a.G=f}a.F.set(b,a.count++*a.C)}
G.prototype.r=function(a,b){if(0!==this.count){var c=this.D,d=c.ma;a.useProgram(c.handle);b(d);a.bindBuffer(a.ARRAY_BUFFER,this.pa);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.qa);this.$!==this.w?(a.bufferData(a.ARRAY_BUFFER,this.F,a.STATIC_DRAW),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.G,a.STATIC_DRAW),this.$=this.w):a.bufferSubData(a.ARRAY_BUFFER,0,new Float32Array(this.data,0,this.count*this.C));c=void 0;for(c=0;c<this.ga;++c)d=this.Z[c],a.enableVertexAttribArray(d),a.vertexAttribPointer(d,4,a.FLOAT,
!1,this.na,16*c);a.drawElements(this.mode,this.sa*this.count,a.UNSIGNED_SHORT,0);for(c=0;c<this.ga;++c)a.disableVertexAttribArray(this.Z[c])}};G.prototype.clear=function(){this.count=0;this.q=!0};function x(a){za(this,a.h.TRIANGLES,a)}x.prototype=new G(["aCenter","aColor","aRelativeShininessRadius"],[0,1,2,2,1,3]);x.prototype.W="uniform mat4 uProjectionMatrix;\n\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aCenter;\n\nattribute vec4 aColor;\n\nattribute vec4 aRelativeShininessRadius;\n\nvarying vec3 vViewSpacePos;\n\nvarying vec3 vViewSpaceCenter;\n\nvarying vec4 vColor;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\n\nvec4 viewPosHom=uModelViewMatrix*aCenter;\nvViewSpaceCenter=viewPosHom.xyz/viewPosHom.w;\nvec3 dir=normalize(-vViewSpaceCenter);\nvec3 right=normalize(cross(dir,vec3(0,1,0)));\nvec3 up=normalize(cross(right,dir));\n\n\nvColor=aColor;\nvShininess=aRelativeShininessRadius.z;\nvRadius=aRelativeShininessRadius.w;\n\n\nvViewSpacePos=vViewSpaceCenter+\nvRadius*(right*aRelativeShininessRadius.x+\nup*aRelativeShininessRadius.y+dir);\n\n\ngl_Position=uProjectionMatrix*vec4(vViewSpacePos,1);\n}\n";
x.prototype.Q="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\n\nuniform float sphereMode;\n\n\nvarying vec3 vViewSpacePos;\n\nvarying vec3 vViewSpaceCenter;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\nvec3 pointOnSphere=\nsphere(vViewSpacePos,vViewSpaceCenter,vRadius,sphereMode);\nvec3 normal=normalize(pointOnSphere-vViewSpaceCenter);\nfinish(pointOnSphere,normal);\n}\n";
x.prototype.add=function(a,b,c){var d=a[0],e=a[1],f=a[2];a=a[3];var k=c.color,n=c.g,l=k[0],h=k[1],k=k[2];c=c.alpha;1>c&&(this.q=!1);Ea(this,[d,e,f,a,l,h,k,c,1,1,n,b,d,e,f,a,l,h,k,c,-1,1,n,b,d,e,f,a,l,h,k,c,1,-1,n,b,d,e,f,a,l,h,k,c,-1,-1,n,b])};x.prototype.o=function(a,b){this.r(a.h,function(c){a.t(c);c.sphereMode([b])})};function z(a){za(this,a.h.TRIANGLE_STRIP,a)}z.prototype=new G(["aPoint1","aPoint2","aColor","aRelativeRadius","aShininess"],[0,0,2,4,6,7,2,3,1,7,5,4,1,0,2,2]);z.prototype.W="uniform mat4 uProjectionMatrix;\n\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aPoint1;\n\nattribute vec4 aPoint2;\n\nattribute vec4 aColor;\n\nattribute vec4 aRelativeRadius;\n\nattribute vec4 aShininess;\n\nvarying vec3 vPoint1;\n\nvarying vec3 vPoint2;\n\nvarying vec3 vPos;\n\nvarying vec4 vColor;\n\nvarying float vRadius;\n\n\n\n\nvoid main(){\n\nvec4 hom;\nhom=uModelViewMatrix*aPoint1;\nvPoint1=hom.xyz/hom.w;\nhom=uModelViewMatrix*aPoint2;\nvPoint2=hom.xyz/hom.w;\nvec3 dir=normalize(vPoint2-vPoint1);\n\n\nvec3 d2,d3;\nif(abs(dir.x) <abs(dir.y))\nd2=vec3(1,0,0);\nelse\nd2=vec3(0,1,0);\nd2=normalize(cross(dir,d2));\nd3=normalize(cross(dir,d2));\n\nvPos=aRelativeRadius.w*(mat3(dir,d2,d3)*aRelativeRadius.xyz)\n+0.5*((vPoint2+vPoint1) +aRelativeRadius.x*(vPoint2-vPoint1));\n\n\nvColor=aColor;\nvShininess=aShininess.x;\nvRadius=aRelativeRadius.w;\n\n\ngl_Position=uProjectionMatrix*vec4(vPos,1);\n}\n";
z.prototype.Q="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\nvarying vec3 vPoint1;\n\nvarying vec3 vPoint2;\n\nvarying vec3 vPos;\n\nvarying float vRadius;\n\nvec3 endcaps(in float mu,inout vec3 pos){\nvec3 center;\nif(mu<0.0){\ncenter=vPoint1;\n}else if(mu>1.0){\ncenter=vPoint2;\n}else{\nreturn(1.0-mu)*vPoint1+mu*vPoint2;\n}\npos=sphere(vPos,center,vRadius, -1.0);\nreturn center;\n}\n\n\n\n\nvoid main(){\n\n\nvec3 ba=vPoint2-vPoint1;\nvec3 u=ba/dot(ba,ba);\nvec3 v=vPos-dot(vPos,ba)*u;\nvec3 w=dot(vPoint1,ba)*u-vPoint1;\nfloat a=dot(v,v);\nfloat b=2.0*dot(v,w);\nfloat c=dot(w,w) -vRadius*vRadius;\nfloat d=b*b-4.0*a*c;\nif(d<0.0)\ndiscard;\nfloat lambda= (b+sqrt(d))/(-2.0*a);\nvec3 pointOnSurface=lambda*vPos;\nfloat mu=dot(pointOnSurface-vPoint1,u);\nvec3 center=endcaps(mu,pointOnSurface);\nvec3 normal=normalize(pointOnSurface-center);\nfinish(pointOnSurface,normal);\n}\n";
z.prototype.add=function(a,b,c){var d=a[0],e=a[1],f=a[2];a=a[3];var k=b[0],n=b[1],l=b[2];b=b[3];var h=c.color,g=c.g,p=c.size,m=h[0],y=h[1],h=h[2];c=c.alpha;1>c&&(this.q=!1);Ea(this,[d,e,f,a,k,n,l,b,m,y,h,c,1,1,1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,1,1,-1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,1,-1,1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,1,-1,-1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,-1,1,1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,-1,1,-1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,-1,-1,1,p,g,0,0,0,d,e,f,a,k,n,l,b,m,y,h,c,-1,-1,
-1,p,g,0,0,0])};z.prototype.o=function(a){if(0!==this.count){var b=a.h;b.enable(b.CULL_FACE);b.cullFace(b.BACK);this.r(b,a.t.bind(a));b.disable(b.CULL_FACE)}};function A(a){za(this,a.h.TRIANGLES,a)}A.prototype=new G(["aPos","aNormalAndShininess","aColor"],[0,1,2]);A.prototype.W="uniform mat4 uProjectionMatrix;\nuniform mat4 uModelViewMatrix;\n\nattribute vec4 aPos;\nattribute vec4 aNormalAndShininess;\nattribute vec4 aColor;\n\nvarying vec4 vPos;\nvarying vec4 vNormal;\nvarying vec4 vColor;\n\nvoid main(){\nvPos=uModelViewMatrix*aPos;\ngl_Position=uProjectionMatrix*vPos;\nvNormal=uModelViewMatrix*vec4(aNormalAndShininess.xyz,0.0);\nvShininess=aNormalAndShininess.w;\nvColor=aColor;\n}\n";
A.prototype.Q="uniform mat4 uProjectionMatrix;\n\nvec3 sphere(in vec3 ray,in vec3 center,in float radius,in float face){\n\nvec3 dir=normalize(ray);\n\n\n\n\nfloat b=dot(center,dir);\nfloat c=dot(center,center) -radius*radius;\nfloat d=b*b-c;\nif(d<0.0)discard;\nfloat lambda=b+face*sqrt(d);\nif(lambda<0.0)discard;\n\n\nreturn lambda*dir;\n}\n\nvoid finish(in vec3 pos,in vec3 normal){\nshade(pos,normal);\n#ifdef GL_EXT_frag_depth\nvec4 projPoint=uProjectionMatrix*vec4(pos,1);\ngl_FragDepthEXT= (projPoint.z/projPoint.w+1.0) /2.0;\n#endif\n}\n\nvarying vec4 vPos;\nvarying vec4 vNormal;\n\nvoid main(){\nfinish(vPos.xyz/vPos.w,normalize(vNormal.xyz));\n}\n";
function L(a,b,c,d,e,f,k,n){var l=n.color,h=n.g,g=l[0],p=l[1],l=l[2];n=n.alpha;1>n&&(a.q=!1);Ea(a,[b[0],b[1],b[2],b[3],e[0],e[1],e[2],h,g,p,l,n,c[0],c[1],c[2],c[3],f[0],f[1],f[2],h,g,p,l,n,d[0],d[1],d[2],d[3],k[0],k[1],k[2],h,g,p,l,n])}function Fa(a,b,c,d,e,f,k,n,l,h,g){var p=g.g;g=g.alpha;1>g&&(a.q=!1);Ea(a,[b[0],b[1],b[2],b[3],e[0],e[1],e[2],p,n[0],n[1],n[2],g,c[0],c[1],c[2],c[3],f[0],f[1],f[2],p,l[0],l[1],l[2],g,d[0],d[1],d[2],d[3],k[0],k[1],k[2],p,h[0],h[1],h[2],g])}
function M(a,b,c){if(3==b.length){var d=b[0],e=b[1];b=b[2];var f=r(d),f=ea(ia(t(r(e),f),t(r(b),f)));L(a,d,e,b,f,f,f,c)}else{for(var d=b.length,k=Array(d+2),f=[0,0,0],e=0;e<d;++e)k[e]=r(b[e]);k[d]=k[0];k[d+1]=k[1];for(e=1;e<=d;++e)f=ga(f,ia(t(k[e],k[e-1]),t(k[e],k[e+1])));if(4==d)L(a,b[0],b[1],b[3],f,f,f,c),L(a,b[3],b[1],b[2],f,f,f,c);else{for(var k=[0,0,0,0],n=b[d-1],e=0;e<d;++e)k=ha(k,b[e]);for(e=0;e<d;++e)L(a,n,b[e],k,f,f,f,c),n=b[e]}}}
function N(a,b,c,d){if(3==b.length)L(a,b[0],b[1],b[2],c[0],c[1],c[2],d);else if(4==b.length)L(a,b[0],b[1],b[3],c[0],c[1],c[3],d),L(a,b[3],b[1],b[2],c[3],c[1],c[2],d);else{var e=b.length,f,k=[0,0,0,0],n=[0,0,0];for(f=0;f<e;++f)k=ha(k,b[f]),n=ga(n,c[f]);var l=b[e-1],h=c[e-1];for(f=0;f<e;++f)L(a,l,b[f],k,h,c[f],n,d),l=b[f],h=c[f]}}
function Ga(a,b,c,d,e){3==b.length?Fa(a,b[0],b[1],b[2],c[0],c[1],c[2],d[0],d[1],d[2],e):4==b.length?(Fa(a,b[0],b[1],b[3],c[0],c[1],c[3],d[0],d[1],d[3],e),Fa(a,b[3],b[1],b[2],c[3],c[1],c[2],d[3],d[1],d[2],e)):console.error("addPolygonWithNormalsAndColors not supported for more than 4 corners")}A.prototype.o=function(a){this.r(a.h,a.t.bind(a))};function O(a){var b;b=void 0===b?null:b;return"list"!==a.ctype?(console.log("argument is not a list"),b):a.value}function P(a,b){b=void 0===b?[0,0,0,0]:b;var c=O(a);if(null===c)return b;c=c.map(Q);4<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,4));for(;3>c.length;)c.push(0);3===c.length&&c.push(1);return c}
function T(a,b){b=void 0===b?[0,0,0]:b;var c=O(a);if(null===c)return b;c=c.map(Q);3<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,3));for(;3>c.length;)c.push(0);return c}function U(a,b){b=void 0===b?[.5,.5,.5]:b;if("number"===a.ctype){var c=V(0,1,a);if(!isNaN(c))return[c,c,c]}c=O(a);return null===c?b:3!=c.length?(console.log("Not an RGB color vector"),b):c.map(function(a){return V(0,1,a)})}
function Q(a,b){b=void 0===b?Number.NaN:b;if("number"!==a.ctype)return console.log("argument is not a number"),b;var c=a.value,d=c.real;0!==c.imag&&console.log("complex number is not real");return d}function W(a,b){b=void 0===b?Number.NaN:b;if("number"!==a.ctype)return console.log("argument is not a number"),b;var c=a.value,d=c.real,c=c.imag;0!==c&&console.log("complex number is not real");c=Math.round(d);c!==d&&console.log("number is not an integer");return c}
function V(a,b,c,d){d=void 0===d?Number.NaN:d;c=Q(c,d);return c<a?a:c>b?b:c}function Ha(a,b){b=void 0===b?null:b;if("string"===a.ctype)return a.value;console.log("argument is not a string");return b};createCindy.registerPlugin(1,"Cindy3D",function(a){function b(a,b){var c=void 0,d;for(c in a)(d=b[c])?d(h(a[c])):console.log("Modifier "+c+" not supported")}function c(a,c,d){d=void 0===d?null:d;var e=a.color,Aa=a.alpha,f=a.g,k=a.size;a={color:function(a){return e=U(a)},alpha:function(a){return Aa=V(0,1,a)},shininess:function(a){return f=V(0,128,a)},size:function(a){return k=.05*Q(a)}};var m=void 0;if(d)for(m in d)a[m]=d[m];b(c,a);return{color:e,alpha:Aa,g:f,size:k}}function d(a){m.j.alpha=V(0,1,
h(a[0]),1);return l}function e(a,b,c,d,e,f){for(var k=1,l=0;k<a;++k){for(var h=1;h<b;++h)M(m.e,[e[l],e[l+1],e[l+b+1],e[l+b]],f),++l;c&&M(m.e,[e[l],e[l+1-b],e[l+1],e[l+b]],f);++l}if(d){for(a=1;a<b;++a)M(m.e,[e[l],e[l+1],e[a],e[a-1]],f),++l;c&&M(m.e,[e[l],e[l+1-b],e[0],e[b-1]],f)}}function f(a,b,c,d,e,f,l){for(var k=1,h=0;k<a;++k){for(var g=1;g<b;++g)N(m.e,[e[h],e[h+1],e[h+b+1],e[h+b]],[f[h],f[h+1],f[h+b+1],f[h+b]],l),++h;c&&N(m.e,[e[h],e[h+1-b],e[h+1],e[h+b]],[f[h],f[h+1-b],f[h+1],f[h+b]],l);++h}if(d){for(a=
1;a<b;++a)N(m.e,[e[h],e[h+1],e[a],e[a-1]],[f[h],f[h+1],f[a],f[a-1]],l),++h;c&&N(m.e,[e[h],e[h+1-b],e[0],e[b-1]],[f[h],f[h+1-b],f[0],f[b-1]],l)}}function k(a,b,c,d,e,f,h,l){for(var k=1,g=0;k<a;++k){for(var n=1;n<b;++n)Ga(m.e,[e[g],e[g+1],e[g+b+1],e[g+b]],[f[g],f[g+1],f[g+b+1],f[g+b]],[h[g],h[g+1],h[g+b+1],h[g+b]],l),++g;c&&Ga(m.e,[e[g],e[g+1-b],e[g+1],e[g+b]],[f[g],f[g+1-b],f[g+1],f[g+b]],[h[g],h[g+1-b],h[g+1],h[g+b]],l);++g}if(d){for(a=1;a<b;++a)Ga(m.e,[e[g],e[g+1],e[a],e[a-1]],[f[g],f[g+1],f[a],
f[a-1]],[h[g],h[g+1],h[a],h[a-1]],l),++g;c&&Ga(m.e,[e[g],e[g+1-b],e[0],e[b-1]],[f[g],f[g+1-b],f[0],f[b-1]],[h[g],h[g+1-b],h[0],h[b-1]],l)}}function n(a,b){function d(a,b){var c=ia(t(a,pa),t(b,pa));E[0]+=c[0];E[1]+=c[1];E[2]+=c[2];++qa}var g=W(h(a[0])),n=W(h(a[1])),H=O(h(a[2])).map(function(a){return P(a)}),p="perface",X="open",I=null,Y=c(m.j,b,{normaltype:function(a){return p=Ha(a,p).toLowerCase()},topology:function(a){return X=Ha(a,p).toLowerCase()},colors:function(a){return I=O(a).map(function(a){return U(a)})}});
if(H.length!==g*n||null!==I&&I.length!==g*n)return l;var B="closerows"===X||"closeboth"===X,C="closecolumns"===X||"closeboth"===X,pa=null,E=null,qa=0;if(4===a.length){var J=O(h(a[3])).map(function(a){return T(a)});if(J.length!==g*n)return l;null!==I?k(g,n,B,C,H,J,I,Y):f(g,n,B,C,H,J,Y)}else if("pervertex"===p){for(var J=Array(g*n),Z=g*n,aa=H.map(r),R=0,ra=0;R<g;++R)for(var S=0;S<n;++S){var K=ra+Z,pa=aa[ra],Ba=aa[(K-1)%Z],Ca=aa[(K+1)%Z],Da=aa[(K-n)%Z],K=aa[(K+n)%Z],E=[0,0,0],qa=0;(C||0<R)&&(B||0<S)&&
d(Ba,Da);(C||R+1<g)&&(B||0<S)&&d(K,Ba);(C||R+1<g)&&(B||S+1<n)&&d(Ca,K);(C||0<R)&&(B||S+1<n)&&d(Da,Ca);J[ra++]=fa(4/qa,E)}null!==I?k(g,n,B,C,H,J,I,Y):f(g,n,B,C,H,J,Y)}else e(g,n,B,C,H,Y);return l}var l=a.nada,h=a.evaluate,g=a.defineFunction,p={},m=void 0;g("begin3d",0,function(c,d){var e="Cindy3D",f={},h={};b(d,{name:function(a){return e=Ha(a,e)},antialias:function(a){"boolean"===a.ctype?a=a.value:(console.log("argument is not boolean"),a=!1);return f.antialias=a},supersample:function(a){return h.la=
Q(a,1)}});(m=p[e])||(p[e]=m=new w(e,f,h,a.addAutoCleaningEventListener));m.clear();return l});g("end3d",0,function(){m.o();m=null;return l});g("gsave3d",0,function(){m.Y.push({I:v(m.l),H:v(m.i),M:v(m.j)});return l});g("grestore3d",0,function(){var a=m.Y;0<a.length?(a=a.pop(),m.l=a.I,m.i=a.H,m.j=a.M):(m.l=v(D.I),m.i=v(D.H),m.j=v(D.M));return l});g("color3d",1,function(a){if(a=U(h(a[0]),null))m.l.color=a,m.i.color=a,m.j.color=a;return l});g("pointcolor3d",1,function(a){if(a=U(h(a[0]),null))m.l.color=
a;return l});g("linecolor3d",1,function(a){if(a=U(h(a[0]),null))m.i.color=a;return l});g("surfacecolor3d",1,function(a){if(a=U(h(a[0]),null))m.j.color=a;return l});g("alpha3d",1,d);g("surfacealpha3d",1,d);g("shininess3d",1,function(a){a=V(0,128,h(a[0]));isNaN(a)||(m.l.g=a,m.i.g=a,m.j.g=a);return l});g("pointshininess3d",1,function(a){a=V(0,128,h(a[0]));isNaN(a)||(m.l.g=a);return l});g("lineshininess3d",1,function(a){a=V(0,128,h(a[0]));isNaN(a)||(m.i.g=a);return l});g("surfaceshininess3d",1,function(a){a=
V(0,128,h(a[0]));isNaN(a)||(m.j.g=a);return l});g("size3d",1,function(a){a=.05*Q(h(a[0]),-1);0<=a&&(m.l.size=a,m.i.size=a);return l});g("pointsize3d",1,function(a){a=.05*Q(h(a[0]),-1);0<=a&&(m.l.size=a);return l});g("linesize3d",1,function(a){a=.05*Q(h(a[0]),-1);0<=a&&(m.i.size=a);return l});g("draw3d",1,function(a,b){var d=P(h(a[0])),e=c(m.l,b);m.u.add(d,e.size,e);return l});g("draw3d",2,function(a,b){var d=P(h(a[0])),e=P(h(a[1])),f=c(m.i,b);m.s.add(d,e,f);return l});g("connect3d",1,function(a,b){var d=
O(h(a[0])),e=c(m.i,b);if(2>d.length)return l;for(var f=P(d[0]),g=1;g<d.length;++g){var k=P(d[g]);m.s.add(f,k,e);f=k}return l});g("drawpoly3d",1,function(a,b){var d=O(h(a[0])),e=c(m.i,b);if(2>d.length)return l;for(var f=P(d[d.length-1]),g=0;g<d.length;++g){var k=P(d[g]);m.s.add(f,k,e);f=k}return l});g("fillpoly3d",1,function(a,b){var d=O(h(a[0])),e=c(m.j,b);if(2>d.length)return l;d=d.map(function(a){return P(a)});M(m.e,d,e);return l});g("fillpoly3d",2,function(a,b){var d=O(h(a[0])),e=O(h(a[1])),f=
c(m.j,b);if(2>d.length||d.length!=e.length)return l;d=d.map(function(a){return P(a)});e=e.map(function(a){return T(a)});N(m.e,d,e,f);return l});g("fillcircle3d",3,function(){return l});g("drawsphere3d",2,function(a,b){var d=P(h(a[0])),e=Q(h(a[1])),f=c(m.j,b);m.u.add(d,e,f);return l});g("mesh3d",3,function(a,b){return n(a,b)});g("mesh3d",4,function(a,b){return n(a,b)});g("background3d",1,function(a){if(a=U(h(a[0]),null))a.push(1),m.backgroundColor=a;return l});g("lookat3d",3,function(a){var b=P(h(a[0]),
null),c=P(h(a[1]),null);a=T(h(a[2]),null);b&&c&&a&&la(m.m,r(b),r(c),a);return l});g("fieldofview3d",1,function(a){a=V(1,179,h(a[0]),0);0<a&&(m.m.aa=a,ka(m.m));return l});g("depthrange3d",2,function(a){var b=Q(h(a[0]),-1);a=Q(h(a[1]),-1);0<=b&&a>b&&(m.m.O=b,m.m.N=a,ka(m.m));return l});g("renderhints3d",0,function(){return l});g("pointlight3d",1,function(a,c){var d=W(h(a[0]),0),e=[0,0,0,1],f=[1,1,1],g=[1,1,1];b(c,{position:function(a){return e=P(a,e)},diffuse:function(a){return f=U(a,f)},specular:function(a){return g=
U(a,g)}});va(m.n,d,new ua(r(e),f,g));return l});g("directionallight3d",1,function(a,c){var d=W(h(a[0]),0),e=[0,-1,0],f=[1,1,1],g=[1,1,1];b(c,{direction:function(a){return e=T(a,e)},diffuse:function(a){return f=U(a,f)},specular:function(a){return g=U(a,g)}});va(m.n,d,new xa(e,f,g));return l});g("spotlight3d",1,function(a,c){var d=W(h(a[0]),0),e=[0,0,0,1],f=[0,-1,0],g=Math.PI/4,k=0,n=[1,1,1],p=[1,1,1];b(c,{position:function(a){return e=P(a,e)},direction:function(a){return f=T(a,f)},cutoffangle:function(a){return g=
V(0,Math.PI,a,g)},exponent:function(a){return k=Q(a,k)},diffuse:function(a){return n=U(a,n)},specular:function(a){return p=U(a,p)}});va(m.n,d,new ya(r(e),f,Math.cos(g),k,n,p));return l});g("disablelight3d",1,function(a){a=W(h(a[0]),0);va(m.n,a,null);return l});g("ambientlight3d",1,function(a){if(a=U(h(a[0])))m.n.X=a;return l})});
})();//# sourceMappingURL=Cindy3D.js.map

