(function(){
'use strict';var aa={addc:"vec2 addc(vec2 a,vec2 b){\nreturn a+b;\n}\n",arccosc:"vec2 arccosc(vec2 a){\nvec2 t2=multc(a,negc(a));\nvec2 tmp=sqrtc(addc(vec2(1.0,0.0),t2));\nvec2 tmp1=addc(multc(a,vec2(0.0,1.0)),tmp);\nvec2 erg=addc(multc(logc(tmp1),vec2(0.0,1.0)),vec2(pi*0.5,0.0));\nreturn erg;\n}\n",arcsinc:"vec2 arcsinc(vec2 a){\nvec2 t2=multc(a,negc(a));\nvec2 tmp=sqrtc(addc(vec2(1.0,0.0),t2));\nvec2 tmp1=addc(multc(a,vec2(0.0,1.0)),tmp);\nvec2 erg=multc(logc(tmp1),vec2(0.0,-1.0));\nreturn erg;\n}\n",
arctan2c:"\n\n\n\nvec2 arctan2c(vec2 x,vec2 y){\nvec2 r=logc(divc(x+vec2(-y.y,y.x),sqrtc(multc(x,x)+multc(y,y))));\nreturn vec2(r.y, -r.x);\n}\n",arctan2vec2:"float arctan2vec2(vec2 v){\nreturn atan(v.y,v.x);\n}\n",arctan2vec2c:"vec2 arctan2vec2c(vec4 v){\nreturn arctan2c(v.xy,v.zw);\n}\n",arctanc:"vec2 arctanc(vec2 a){\nvec2 t1=logc(addc(multc(a,vec2(0.0,-1.0)),vec2(1.0,0.0)));\nvec2 t2=logc(addc(multc(a,vec2(0.0,1.0)),vec2(1.0,0.0)));\nvec2 erg=multc(subc(t1,t2),vec2(0.0,0.5));\nreturn erg;\n}\n",
blue:"vec3 blue(float f)\n{\nreturn vec3(0.,0.,clamp(f,0.,1.));\n}\n",cimag:"float imagc(vec2 a){\nreturn a.y;\n}\n",conjugate:"vec2 conjugate(vec2 a){\nreturn vec2(a.x, -a.y);\n}\n",copytexture_f:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D sampler;\nvarying vec2 cgl_pixel;\n\nvoid main(void){\ngl_FragColor=texture2D(sampler,cgl_pixel);\n}\n",copytexture_v:"attribute vec3 aPos;\nattribute vec2 aTexCoord;\nvarying vec2 cgl_pixel;\n\nvoid main(void){\ngl_Position=vec4(aPos,1.);\ncgl_pixel=aTexCoord;\n}\n",
cosc:"vec2 cosc(vec2 a){\n\nfloat n=exp(a.y);\nfloat imag1=n*sin(-a.x);\nfloat real1=n*cos(-a.x);\nn=exp(-a.y);\nfloat imag2=n*sin(a.x);\nfloat real2=n*cos(a.x);\nfloat i= (imag1+imag2) /2.0;\nfloat r= (real1+real2) /2.0;\n\nreturn vec2(r,i);\n}\n",creal:"float realc(vec2 a){\nreturn a.x;\n}\n",dehomogenize:"vec2 dehomogenize(vec3 z){\nreturn vec2(z.x,z.y)/z.z;\n}\n",divc:"vec2 divc(vec2 a,vec2 b){\nreturn 1./(b.x*b.x+b.y*b.y)*multc(a,vec2(b.x,-b.y));\n}\n",expc:"vec2 expc(vec2 a){\nfloat n=exp(a.x);\nfloat r=n*cos(a.y);\nfloat i=n*sin(a.y);\nreturn vec2(r,i);\n}\n",
float2color:"vec4 float2color(float f)\n{\nreturn vec4(f,f,f,1.);\n}\n",gray:"vec3 gray(float f)\n{\nf=clamp(f,0.,1.);\nreturn vec3(f,f,f);\n}\n",green:"vec3 green(float f)\n{\nreturn vec3(0.,clamp(f,0.,1.),0.);\n}\n",hsv2rgb:"vec3 hsv2rgb(vec3 c)\n{\nvec4 K=vec4(1.0,2.0/3.0,1.0/3.0,3.0);\nvec3 p=abs(fract(c.xxx+K.xyz) *6.0-K.www);\nreturn c.z*mix(K.xxx,clamp(p-K.xxx,0.0,1.0),c.y);\n}\n",hue:"vec3 hue(float a){\nreturn hsv2rgb(vec3(a,1.,1.));\n}\n",imagc:"float imagc(vec2 a){\nreturn a.y;\n}\n",invc:"vec2 invc(vec2 a){\nfloat n=a.x*a.x+a.y*a.y;\nreturn vec2(a.x/n,-a.y/n);\n}\n",
logc:"vec2 logc(vec2 a){\nfloat re=a.x;\nfloat im=a.y;\nfloat s=sqrt(re*re+im*im);\nfloat i=im;\nfloat imag=atan(im,re);\nif(i<0.0){\nimag+= (2.0*pi);\n}\nif(i==0.0&&re<0.0){\nimag=pi;\n}\nif(imag>pi){\nimag-= (2.0*pi);\n};\nfloat real=log(s);\n\nreturn vec2(real,imag);\n}\n",logr:"vec2 logr(float a){\nif(a>=0.)return vec2(log(a),0);\nelse return vec2(log(-a),pi);\n}\n",mat2complex:"mat4 mat2complex(mat2 a)\n{\nreturn mat4(\nvec4(a[0][0],0,a[0][1],0),\nvec4(0,a[0][0],0,a[0][1]),\nvec4(a[1][0],0,a[1][1],0),\nvec4(0,a[1][0],0,a[1][1])\n);\n}\n",
multc:"vec2 multc(vec2 a,vec2 b){\nreturn vec2(a.x*b.x-a.y*b.y+0.0000000000000001,a.y*b.x+a.x*b.y);\n}\n",negc:"vec2 negc(vec2 a){\nreturn vec2(-a.x,-a.y);\n}\n",powc:"vec2 powc(vec2 a,vec2 b){\nreturn expc(multc(logc(a),b));\n}\n",powi:"float powi(float a,int b){\nreturn pow(a,float(b));\n}\n",random:"uniform float rnd_;\n\nfloat last_rnd= .1231;\nfloat random(){\nfloat a=mod(rnd_*plain_pixel.x*32.23,1.21);\nfloat b=mod(last_rnd*plain_pixel.y*54.21,1.32);\nlast_rnd=mod(a+b+12232.2213*(1.+rnd_)*dot(plain_pixel,plain_pixel)+a+sin(b)+b*sin(dot(plain_pixel,vec2(232.121+rnd_,2232.11))+last_rnd*121.11)*129.12+rnd_,1.);\nreturn last_rnd;\n\n\n}\n",
realc:"float realc(vec2 a){\nreturn a.x;\n}\n",red:"vec3 red(float f)\n{\nreturn vec3(clamp(f,0.,1.),0.,0.);\n}\n",rgb2hsv:"vec3 rgb2hsv(vec3 c)\n{\nvec4 K=vec4(0.0, -1.0/3.0,2.0/3.0, -1.0);\nvec4 p=mix(vec4(c.bg,K.wz),vec4(c.gb,K.xy),step(c.b,c.g));\nvec4 q=mix(vec4(p.xyw,c.r),vec4(c.r,p.yzx),step(p.x,c.r));\n\nfloat d=q.x-min(q.w,q.y);\nfloat e=1.0e-10;\nreturn vec3(abs(q.z+ (q.w-q.y) / (6.0*d+e)),d/ (q.x+e),q.x);\n}\n",sinc:"\n\nvec2 sinc(vec2 a){\n\nfloat n=exp(a.y);\nfloat imag1=n*sin(-a.x);\nfloat real1=n*cos(-a.x);\nn=exp(-a.y);\nfloat imag2=n*sin(a.x);\nfloat real2=n*cos(a.x);\nfloat r= -(imag1-imag2) /2.0;\nfloat i= (real1-real2) /2.0;\n\nreturn vec2(r,i);\n}\n",
sqrtc:"vec2 sqrtc(vec2 a){\nreturn expc(multc(logc(a),vec2(0.5,0.0)));\n}\n",sqrtf:"vec2 sqrtf(float a){\nif(a>=0.)return vec2(sqrt(a),0.);\nelse return vec2(0.,sqrt(-a));\n}\n",standardFragmentHeader:"#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define pi 3.141592653589793\n\nvarying vec2 cgl_pixel;\nvarying vec2 plain_pixel;\n",subc:"vec2 subc(vec2 a,vec2 b){\nreturn a-b;\n}\n",tanc:"vec2 tanc(vec2 a){\nvec2 s=sinc(a);\nvec2 c=cosc(a);\nreturn divc(s,c);\n}\n",vec2complex:"vec4 vec2complex(vec2 a)\n{\nreturn vec4(a.x,0.,a.y,0);\n}\n",
vshader:"attribute vec3 aPos;\nattribute vec2 aTexCoord;\nvarying vec2 cgl_pixel;\nvarying vec2 plain_pixel;\nuniform mat3 transformMatrix;\nvoid main(void){\ngl_Position=vec4(aPos,1.);\nplain_pixel=aTexCoord;\nvec3 r=transformMatrix*vec3(plain_pixel,1);\ncgl_pixel=r.xy/r.z;\n}\n"};function ba(a){var b;b=void 0===b?null:b;return"list"!==a.ctype?(console.log("argument is not a list"),b):a.value}function ca(a){var b;b=void 0===b?[.5,.5,.5]:b;if("number"===a.ctype){var d=da(a);if(!isNaN(d))return[d,d,d]}a=ba(a);return null===a?b:3!=a.length?(console.log("Not an RGB color vector"),b):a.map(function(a){return da(a)})}
function ea(a){var b;b=void 0===b?Number.NaN:b;if("number"!==a.ctype)return console.log("argument is not a number"),b;b=a.value;a=b.real;b=b.imag;0!==b&&console.log("complex number is not real");b=Math.round(a);b!==a&&console.log("number is not an integer");return b}
function da(a){var b;b=void 0===b?Number.NaN:b;b=void 0===b?Number.NaN:b;"number"!==a.ctype?(console.log("argument is not a number"),a=b):(a=a.value,b=a.real,0!==a.imag&&console.log("complex number is not real"),a=b);return 0>a?0:1<a?1:a};function fa(a){this.h=a}fa.prototype.toString=function(){return this.h};
function ga(a,b){var d=h;this.h=d.createProgram();ia(this,d,d.VERTEX_SHADER,a);ia(this,d,d.FRAGMENT_SHADER,b);var c=this.h;d.linkProgram(c);if(!d.getProgramParameter(c,d.LINK_STATUS))throw new fa("Error linking shader:\n"+d.getProgramInfoLog(c));d.validateProgram(c);if(!d.getProgramParameter(c,d.VALIDATE_STATUS))throw new fa("Error validating shader:\n"+d.getProgramInfoLog(c));var e,f=this.h,g,n,k,m={},r,y,C,ha;e=d.getProgramParameter(f,d.ACTIVE_UNIFORMS);for(c=0;c<e;++c)if(g=d.getActiveUniform(f,
c),null!==g&&(n=g.name.replace(/\]/g,""))){for(r=m;null!==(k=/[.\[]/.exec(n));)y=n.substr(0,k.index),r.hasOwnProperty(y)?r=r[y]:"."===k[0]?r=r[y]={}:r=r[y]=[],n=n.substr(k.index+1);if(1<g.size){k=g.size;ha=Array(k);for(y=0;y<k;++y)C=g.name+"["+y+"]",C=ja(this,d,C,g),ha[y]=C;r[n]=ha}else C=ja(this,d,g.name,g),r[n]=C}this.i=m}
function ia(a,b,d,c){d=b.createShader(d);b.shaderSource(d,c);b.compileShader(d);if(!b.getShaderParameter(d,b.COMPILE_STATUS))throw console.warn(c.split("\n")),new fa("Error compiling shader:\n"+b.getShaderInfoLog(d));b.attachShader(a.h,d)}
function ja(a,b,d,c){a=b.getUniformLocation(a.h,d);switch(c.type){case b.FLOAT:return b.uniform1fv.bind(b,a);case b.FLOAT_VEC2:return b.uniform2fv.bind(b,a);case b.FLOAT_VEC3:return b.uniform3fv.bind(b,a);case b.FLOAT_VEC4:return b.uniform4fv.bind(b,a);case b.BOOL:case b.INT:case b.SAMPLER_2D:case b.SAMPLER_CUBE:return b.uniform1iv.bind(b,a);case b.BOOL_VEC2:case b.INT_VEC2:return b.uniform2iv.bind(b,a);case b.BOOL_VEC3:case b.INT_VEC3:return b.uniform3iv.bind(b,a);case b.BOOL_VEC4:case b.INT_VEC4:return b.uniform4iv.bind(b,
a);case b.FLOAT_MAT2:return b.uniformMatrix2fv.bind(b,a,!1);case b.FLOAT_MAT3:return b.uniformMatrix3fv.bind(b,a,!1);case b.FLOAT_MAT4:return b.uniformMatrix4fv.bind(b,a,!1);default:throw new fa("Unknown data type for uniform "+d);}};function ka(a){for(var b=1;b<a;)b<<=1;return b}function la(a){return ma?new Float32Array(a):na?new Uint16Array(a):new Uint8Array(a)}
function oa(a){this.s=a;this.w=a.width;this.u=a.height;this.F=ka(this.w);this.G=ka(this.u);this.h=0;for(var b=[],d=0;d<this.F;d++)for(var c=0;c<this.G;c++)b.push(0,0,0,255);b=la(b);this.i=[];this.o=[];a.drawTo=this.A.bind(this);a.cdyUpdate=this.C.bind(this);for(a=0;2>a;a++)this.i[a]=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.i[a]),h.pixelStorei(h.UNPACK_ALIGNMENT,1),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,this.F,this.G,0,h.RGBA,ma?h.FLOAT:na?pa.HALF_FLOAT_OES:h.UNSIGNED_BYTE,b),h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),this.o[a]=h.createFramebuffer(),h.bindFramebuffer(h.FRAMEBUFFER,this.o[a]),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this.i[a],0);this.l=new ga(aa.copytexture_v,aa.copytexture_f);a=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,a);a=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]);b=h.getAttribLocation(this.l.h,"aPos");h.enableVertexAttribArray(b);d=h.getAttribLocation(this.l.h,"aTexCoord");
h.enableVertexAttribArray(d);var c=new Float32Array([0,0,1,0,0,1,1,1]),e=a.byteLength;h.bufferData(h.ARRAY_BUFFER,e+c.byteLength,h.STATIC_DRAW);h.bufferSubData(h.ARRAY_BUFFER,0,a);h.bufferSubData(h.ARRAY_BUFFER,e,c);h.vertexAttribPointer(b,3,h.FLOAT,!1,0,0);h.vertexAttribPointer(d,2,h.FLOAT,!1,0,e)}oa.prototype.bindTexture=function(){h.bindTexture(h.TEXTURE_2D,this.i[this.h])};oa.prototype.bindFramebuffer=function(){h.bindFramebuffer(h.FRAMEBUFFER,this.o[this.h^1]);this.h^=1};
oa.prototype.C=function(){var a=this.s.getContext("2d");a.clearRect(0,0,this.w,this.u);this.A(a,0,0)};oa.prototype.A=function(a,b,d){qa(this.w,this.u);h.viewport(0,0,this.F,this.G);h.useProgram(this.l.h);h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,this.i[this.h]);this.l.i.sampler([0]);h.bindFramebuffer(h.FRAMEBUFFER,null);h.drawArrays(h.TRIANGLE_STRIP,0,4);h.flush();a.drawImage(l,0,l.height-this.u,this.w,this.u,b,d,this.w,this.u)};
var ra=function(){var a=new Float32Array(1),b=new Int32Array(a.buffer);return function(d){a[0]=d;d=b[0];var c=d>>16&32768,e=(d&2147483647)+4096;if(1199570944<=e)return 1199570944<=(d&2147483647)?2139095040>e?c|31744:c|31744|(d&8388607)>>13:c|31743;if(947912704<=e)return c|e-939524096>>13;if(855638016>e)return c;e=(d&2147483647)>>23;return c|(d&8388607|8388608)+(8388608>>>e-102)>>126-e}}();function sa(a){return 255*a};function ta(a){this.o={};this.l={};this.h={};this.m={};this.I={};this.J=[];this.K={};this.C=[];this.A=!1;this.i={};this.s=a;this.B={}}function ua(a,b,d,c){if(!p(d,c))return console.error(q(d)+" is no subtype of "+q(c)+" (trying to cast the term "+b+")"),b;if(d===c)return b;var e=va[d][c];return t.hasOwnProperty(d)&&t[d].hasOwnProperty(e)?ua(a,t[d][e](b,a),e,c):(console.error("CindyGL: No type-inclusion function for "+q(d)+" to "+q(e)+" found. \n Using identity"),ua(a,b,e,c))}
function wa(a,b,d){if(b.isuniform)return a.m[b.uvariable].type;if("variable"===b.ctype){b=b.name;if("#"===b)return u;if(a.h.hasOwnProperty(d)&&a.h[d].hasOwnProperty(b))return a.h[d][b];if(a.h.hasOwnProperty("")&&a.h[""].hasOwnProperty(b))return a.h[""][b]}else if("function"===b.ctype&&a.i.hasOwnProperty(b.oper)){if(a.h.hasOwnProperty("")&&a.h[""].hasOwnProperty(b.oper))return a.h[""][b.oper]}else{if("number"===b.ctype)return 0!==b.value.imag?v:(b.value.real|0)===b.value.real?w:x;if("void"===b.ctype)return z;
if("field"===b.ctype)return x;if("string"===b.ctype)return xa;for(var c=Array(b.args.length),e=0;e<b.args.length;e++)c[e]=ya(a,b.args[e],d);a=za(Aa(b.oper),c);return void 0===a||a===A?A:a.g}return A}function ya(a,b,d){a.A&&b.hasOwnProperty("computedType")||(b.computedType=wa(a,b,d));return b.computedType}
function Ba(a,b){function d(a,b){c.hasOwnProperty(b)||(c[b]=[]);e.hasOwnProperty(b)||(e[b]={});for(var k in a.args)d(a.args[k],b);if("="===a.oper){var m=a.args[0].name;k=b;-1===c[b].indexOf(m)&&(k="",-1===c[k].indexOf(m)&&(c[k].push(m),e[k][m]=[]));e[k][m].push({v:a.args[1],H:b})}else if(void 0!==a.oper&&"regional"===Aa(a.oper))for(m=0;m<a.args.length;m++)"variable"===a.args[m].ctype&&(k=a.args[m].name,-1===c[b].indexOf(k)&&(c[b].push(k),e[b][k]=[]));else if("function"===a.ctype&&f.hasOwnProperty(a.oper)){k=
a.oper;c.hasOwnProperty(k)||(c[k]=[]);e.hasOwnProperty(k)||(e[k]={});for(m in f[k].arglist){var r=f[k].arglist[m].name;c[k].push(r);e[k].hasOwnProperty(r)||(e[k][r]=[]);e[k][r].push({v:a.args[m],H:b})}d(f[k].body,k);-1===c[""].indexOf(k)&&(c[""].push(k),e[""][k]=[{v:f[k].body,H:k}])}}var c={},e={},f=a.i;d(b,"");a.o=c;a.l=e}
function Da(a,b){function d(a,b){if(a.hasOwnProperty("dependsOnPixel")&&!0===a.dependsOnPixel)return!0;if("variable"===a.ctype){var c=a.name;return e.hasOwnProperty(b)&&e[b][c]||-1===f[b].indexOf(c)&&e.hasOwnProperty("")&&e[""][c]?a.dependsOnPixel=!0:a.dependsOnPixel=!1}for(c in a.args)if(d(a.args[c],b))return a.dependsOnPixel=!0;return"function"===a.ctype&&"random"===Aa(a.oper)||"function"===a.ctype&&g.hasOwnProperty(a.oper)&&(c=a.oper,e.hasOwnProperty(c)||(e[c]={}),d(g[c].body,c))?a.dependsOnPixel=
!0:"field"===a.ctype?a.dependsOnPixel=d(a.obj,b):!1}function c(a,b){if(d(a,b)){for(var e in a.args)c(a.args[e],b);"field"===a.ctype&&c(a.obj,b);"function"===a.ctype&&g.hasOwnProperty(a.oper)&&(e=a.oper,m.hasOwnProperty(e)||(m[e]=!0,c(g[e].body,e)))}else"number"!==a.ctype&&"string"!==a.ctype&&"void"!==a.ctype&&(e=Ea(),a.isuniform=!0,a.uvariable=e,r[e]={v:a,type:A})}var e={"":{"#":!0}},f=a.o,g=a.i,n;for(n in a.l)for(var k in a.l[n])e.hasOwnProperty(n)||(e[n]={}),e[n][k]=!0;d(b,"");var m={"":!0},r={};
c(b,"");a.m=r}function Fa(a,b){if("function"===b.ctype&&!a.i.hasOwnProperty(b.oper)&&null!==a.s.getMyfunction(b.oper)){var d=b.oper;a.i[d]=Ga(a.s.getMyfunction(d));Fa(a,a.i[d].body)}for(var c in b.args)Fa(a,b.args[c])}
function B(a,b,d,c){if(b.isuniform){b=b.uvariable;var e=a.m[b].type;return c?{code:"",j:b,type:e}:{code:""}}if(";"===b.oper){for(var e={type:z,j:""},f="",g=b.args.length-1,n=g;0<=n;n--)"void"===b.args[n].ctype&&g--;for(n=0;n<=g;n++)e=B(a,b.args[n],d,c&&n===g),f+=e.code;return c?{code:f,j:e.j,type:e.type}:{code:f}}if("="===b.oper)return e=B(a,b.args[1],d,!0),f=b.args[0].name,b=f+" = "+ua(a,e.j,e.type,ya(a,b.args[0],d)),c?{code:e.code,j:b,type:a.h[d][f]}:{code:e.code+b+";\n"};if("repeat$2"===b.oper){if("number"!==
b.args[0].ctype)return console.error("repeat possible only for fixed constant number in GLSL"),A;e=Ea();f=b.args[0].value.real|0;b=B(a,b.args[1],d,c);n=g="";c&&(n=Ea(),g+=D[b.type]+" "+n+";");g=g+("for(int "+e+"=0; "+e+" < "+f+"; "+e+"++) {\n")+b.code;c&&(g+=n+" = "+b.j+";\n");g+="}\n";return c?{code:g,j:n,type:b.type}:{code:g}}if("repeat$3"===b.oper)console.error("TODO");else{if("if$2"===b.oper||"if$3"===b.oper){var n=B(a,b.args[0],d,!0),k=B(a,b.args[1],d,c),f=e="",g=ya(a,b,d);c&&(f=Ea(),e+=D[g]+
" "+f+";");e+=n.code;e+="if("+n.j+") {\n";e+=k.code;c&&(e+=f+" = "+ua(a,k.j,k.type,g)+";\n");"if$3"===b.oper&&(b=B(a,b.args[2],d,c),e=e+"} else {\n"+b.code,c&&(e+=f+" = "+ua(a,b.j,b.type,g)+";\n"));e+="}\n";return c?{code:e,j:f,type:g}:{code:e}}if("function"===b.ctype||"infix"===b.ctype){var m=b.oper;b=b.args.map(function(b){return B(a,b,d,!0)});f=b.map(function(a){return a.type});if(a.i.hasOwnProperty(m)){e=Ha(a,m);g=Array(b.length);for(n=0;n<b.length;n++)g[n]=a.h[m][a.i[m].arglist[n].name];n=a.h[""][m]}else{m=
Aa(m);if("regional"===m)return c?{j:"",type:z,code:""}:{code:""};var r=za(m,f);if(r===A)return console.error("Could not find a signature for "+m+"("+f.map(q).join(", ")+").\nReturning empty code"),c?{j:"",type:z,code:""}:{code:""};g=r.f;n=r.g;e=A;for(k in E[m])if(Ia(E[m][k][0],r)){e=E[m][k][1];break}e===A&&(console.error("There is no webgl-implementation for "+m+"("+r.f.map(q).join(", ")+").\ndefualt: Try glsl-function with same name"),e=function(a){return m+"("+a.join(", ")+")"})}for(var k="",r=
Array(b.length),y=0;y<b.length;y++)k+=b[y].code,r[y]=ua(a,b[y].j,f[y],g[y]);b=e(r,a);return c?{j:b,type:n,code:k}:{code:k+b+";\n"}}if("number"===b.ctype)return f=ya(a,b,d),f===w?e=b.value.real|0:f===x?e=b.value.real:f===v&&(e="vec2( "+b.value.real+", "+b.value.imag+")"),c?{j:e,type:f,code:""}:{code:f+";\n"};if("string"===b.ctype)return e=xa,b=b.value,c?{j:b,type:e,code:""}:{code:e+";\n"};if("variable"===b.ctype)return e=ya(a,b,d),b=b.name,"#"===b&&(b="cgl_pixel"),c?{j:b,type:e,code:""}:{code:b+";\n"};
if("void"===b.ctype)return c?{j:"",type:z,code:""}:{code:""};if("field"===b.ctype)return e=ya(a,b,d),f=B(a,b.obj,d,!0).j,f+="."+b.key,c?{j:f,type:e,code:""}:{code:f+";\n"}}console.error("dont know how to this.compile "+JSON.stringify(b))}function Ha(a,b){Ja(a,b,a.i[b].arglist.length);return F(b)}
function Ja(a,b,d){if(!a.K.hasOwnProperty(b)){a.K[b]=!0;for(var c=a.i[b],e=Array(d),f=0;f<d;f++)e[f]=c.arglist[f].name;d=D[a.h[""][b]]===z;var f=D[a.h[""][b]]+" "+Aa(b)+"("+e.map(function(d){return D[a.h[b][d]]+" "+d}).join(", ")+"){\n",g;for(g in a.o[b]){for(var n=!0,k=a.o[b][g],m=0;m<e.length;m++)n&=k!==e[m];n&&(f+=D[a.h[b][k]]+" "+k+";\n")}c=B(a,c.body,b,!d);f+=c.code;d||(f+="return "+ua(a,c.j,c.type,a.h[""][b])+";\n");a.C.push(f+"}\n")}}
function Ka(a,b){var d=b=Ga(b);a.A=!1;Fa(a,d);Ba(a,d);Da(a,d);for(var c in a.m)a.m[c].type=x,d=a.s.evaluateAndVal(a.m[c].v),a.m[c].type=La(d),console.log("guessed type "+q(a.m[c].type)+" for "+JSON.stringify(a.m[c].v.name)+" because it has value "+JSON.stringify(d.value));for(c=!0;c;){c=!1;for(var e in a.l)for(var f in a.l[e])for(var g in a.l[e][f]){var d=ya(a,a.l[e][f][g].v,a.l[e][f][g].H),n=A;a.h.hasOwnProperty(e)&&a.h[e].hasOwnProperty(f)&&(n=a.h[e][f]);var k=n;d!==A&&(k=n===A?d:p(d,n)?n:Ma(n,
d),k!==A&&k!==n&&(a.h.hasOwnProperty(e)||(a.h[e]={}),a.h[e][f]=k,console.log("variable "+f+" in scope "+e+" got type "+q(k)+" (oltype/othertype is "+q(n)+"/"+q(d)+")"),c=!0))}}a.A=!0;e=B(a,b,"",!0);f=ua(a,e.j,e.type,G);p(e.type,G)||console.error("expression does not generate a color");var m;g=[];for(m in a.m)g.push("uniform "+D[a.m[m].type]+" "+m+";");m=g.join("\n");g="";for(var r in a.B)g+=a.B[r]+"\n";m=m+g+a.J.join("\n");for(var y in a.o[""])r=a.o[""][y],a.i.hasOwnProperty(r)||(m+=D[a.h[""][r]]+
" "+r+";\n");m+=a.C.join("\n");m+="void main(void) {\n"+e.code+"gl_FragColor = "+f+";\n}\n";console.log(m);y=[];for(var C in a.B)y.push(C);return{code:m,m:a.m,D:y}};function Ga(a){var b;if(null==a||"object"!=typeof a)return a;if(a instanceof Array){b=[];for(var d=0,c=a.length;d<c;d++)b[d]=Ga(a[d]);return b}if(a instanceof Object){b={};for(d in a)a.hasOwnProperty(d)&&0<="oper impl args ctype stack name modifs arglist value real imag key obj body".split(" ").indexOf(d)&&(b[d]=Ga(a[d]));return b}}function Na(a){return"number"===typeof a}
function Ia(a,b){if(a===b)return!0;if(Na(a)||Na(b))return a===b;for(var d in a)if(a.hasOwnProperty(d)&&(!b.hasOwnProperty(d)||!Ia(a[d],b[d])))return!1;for(var c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}function Aa(a){return-1===a.indexOf("$")?a:a.substr(0,a.indexOf("$"))}
function La(a){if("boolean"===a.ctype)return H;if("number"===a.ctype)return a=a.value,1E-10>Math.abs(a.imag)?(a.real|0)===a.real?w:x:v;if("list"===a.ctype){var b=a.value;if(0<b.length){for(var d=La(b[0]),c=1;c<b.length;c++)d=Ma(d,La(b[c]));if(p(d,x)){if(2==b.length)return u;if(3==b.length)return I;if(4==b.length)return J}if(p(d,v)&&2==b.length)return K;if(d===u&&2==b.length)return L;if(d===K&&2==b.length)return Oa;if(d===I&&3==b.length)return Pa;if(d===J&&4==b.length)return Qa}}else if("string"===
a.ctype)return xa;console.error("Cannot guess type of "+JSON.stringify(a));return A}var Ra=0;function Ea(){Ra++;return"_helper"+Ra}function qa(a,b){if(a>l.width||b>l.height)l.width=Math.ceil(a),l.height=Math.ceil(b)};var M={};function Sa(a,b){if(!b.I.hasOwnProperty(a)){b.I[a]=!0;for(var d in M[a])Sa(M[a][d],b);b.J.push(aa[a])}}function N(a){return function(b,d){Sa(a,d);return F(a)(b)}};var Ta=!1,l,h,Ua={},A,D={},E={},na=!1,pa,ma=!1,Va=1,O={},P=[],va=[];
function Wa(){function a(d){l.removeEventListener("webglcontextcreationerror",a,!1);d.statusMessage&&(b=d.statusMessage)}if(!Ta){l=document.createElement("canvas");l.id="glcanvas";l.style.display="none";l.width=l.height=0;document.body.appendChild(l);var b="Unknown";l.addEventListener("webglcontextcreationerror",a,!1);(h=l.getContext("webgl"))||(h=l.getContext("experimental-webgl"));if(!h)throw new fa("Could not obtain a WebGL context.\nReason: "+b);l.removeEventListener("webglcontextcreationerror",
a,!1);ma=h.getExtension("OES_texture_float")&&h.getExtension("OES_texture_float_linear");ma||(console.error("Your browser does not suppert OES_texture_float, trying OES_texture_half_float..."),(na=(pa=h.getExtension("OES_texture_half_float"))&&h.getExtension("OES_texture_half_float_linear"))||console.error("Your browser does not suppert OES_texture_half_float, will use 8-bit textures."));Ta=!0}};createCindy.registerPlugin(1,"CindyGL",function(a){function b(b,c,e,f,g,n){if(!b.M||b.L<Va)b.M=!0,b.L=Va,b.O=new Xa(a,b);b=b.O;var k=g/f,m=c.x+-(e.y-c.y)*k,k=c.y+(e.x-c.x)*k;qa(f,g);h.viewport(0,0,f,g);h.useProgram(b.h.h);c=[e.x-c.x,m-c.x,c.x,e.y-c.y,k-c.y,c.y,0,0,1];b.h.i.hasOwnProperty("transformMatrix")&&b.h.i.transformMatrix([c[0],c[3],c[6],c[1],c[4],c[7],c[2],c[5],c[8]]);for(var r in b.i)if(c=b.l.evaluateAndVal(b.i[r].v),g=b.i[r].type,e=b.h.i[r],void 0!==e)switch(g){case v:e([c.value.real,c.value.imag]);
break;case H:c.value?e([1]):e([0]);break;case w:case x:e([c.value.real]);break;case u:case I:case J:f=0;g===u&&(f=2);g===I&&(f=3);g===J&&(f=4);g=[];for(m=0;m<f;m++)g.push(c.value[m].value.real);e(g);break;case L:case Pa:case Qa:f=0;g===L&&(f=2);g===Pa&&(f=3);g===Qa&&(f=4);g=[];for(m=0;m<f;m++)for(k=0;k<f;k++)g.push(c.value[k].value[m].value.real);e(g);break;case K:e([c.value[0].value.real,c.value[0].value.imag,c.value[1].value.real,c.value[1].value.imag]);break;case Oa:f=Array(16);for(g=0;2>g;g++)for(m=
0;2>m;m++)k=c.value[g].value[m].value,f[8*m+2*g]=k.real,f[4*(2*m+1)+2*g+1]=k.real,f[4*(2*m+1)+2*g]=-k.imag,f[8*m+2*g+1]=k.imag;e(f);break;default:console.error("Don't know how to set uniform"+r+", which has the type "+q(g)+", to "+c)}b.h.i.hasOwnProperty("rnd_")&&b.h.i.rnd_([Math.random()]);for(r=0;r<b.D.length;r++)h.activeTexture(h.TEXTURE0+r),c=b.D[r],e=Ua[c],e.bindTexture(),b.h.i["_sampler_"+c]([r]),b.h.i["_ratio_"+c]([e.w/e.u]),b.h.i["_cropfact_"+c]([e.w/e.F,e.u/e.G]);n?n.bindFramebuffer():h.bindFramebuffer(h.FRAMEBUFFER,
null);h.drawArrays(h.TRIANGLE_STRIP,0,4);h.flush()}A=a.nada;a.defineFunction("compile",1,function(b){b=Ka(new ta(a),b[0]);console.log(b);return{ctype:"string",value:b}});a.defineFunction("forcerecompile",0,function(){Va++;return A});a.defineFunction("colorplot",1,function(d){function c(a,b){var d=a-k.tx,c=b+k.ty;return{x:(d*k.d-c*k.b)/k.det,y:-(-d*k.c+c*k.a)/k.det}}Wa();d=d[0];var e=a.instance.canvas.clientWidth,f=a.instance.canvas.clientHeight,g=a.instance.canvas.width,n=a.instance.canvas.height,
k=a.getInitialMatrix();b(d,c(0,f),c(e,f),g,n,null);a.instance.canvas.getContext("2d").drawImage(l,0,0,g,n,0,0,e,f);return A});a.defineFunction("colorplot",3,function(d){function c(a,b){var d=a-C.tx,c=b+C.ty;return{x:(d*C.d-c*C.b)/C.det,y:-(-d*C.c+c*C.a)/C.det}}Wa();var e=d[0],f=a.extractPoint(a.evaluateAndVal(d[1])),g=a.extractPoint(a.evaluateAndVal(d[2])),n={x:Math.min(f.x,g.x),y:Math.min(f.y,g.y)},k={x:Math.max(f.x,g.x),y:Math.min(f.y,g.y)};d=a.instance.canvas.clientWidth;var m=a.instance.canvas.clientHeight,
r=a.instance.canvas.width,y=a.instance.canvas.height,C=a.getInitialMatrix(),ha=Math.abs((f.x-g.x)/(c(d,0).x-c(0,0).x)),Ca=Math.abs((f.y-g.y)/(c(0,m).y-c(0,0).y));b(e,n,k,r*ha,y*Ca,null);e=a.instance.canvas.getContext("2d");n=Math.min(f.x,g.x);f=Math.max(f.y,g.y);e.drawImage(l,0,l.height-y*Ca,r*ha,y*Ca,n*C.a-f*C.b+C.tx,n*C.c-f*C.d-C.ty,ha*d,Ca*m);return A});a.defineFunction("colorplot",4,function(d){Wa();var c=a.extractPoint(a.evaluateAndVal(d[0])),e=a.extractPoint(a.evaluateAndVal(d[1])),f=a.evaluateAndVal(d[2]);
d=d[3];if(!c.ok||!e.ok||"string"!==f.ctype)return A;var g=a.getImage(f.value,!0);if("undefined"===typeof g||null===g)return A;var n=g.width,k=g.height;Ua.hasOwnProperty(f.value)||(Ua[f.value]=new oa(g));b(d,c,e,n,k,Ua[f.value]);return A});a.defineFunction("setpixel",4,function(b){var c;var e=a.evaluateAndVal(b[0]),f;f=void 0===f?null:f;"string"===e.ctype?c=e.value:(console.log("argument is not a string"),c=f);e=ea(a.evaluateAndVal(b[1]));f=ea(a.evaluateAndVal(b[2]));b=ca(a.evaluateAndVal(b[3]));if(isFinite(e)&&
isFinite(f)&&c&&Ua.hasOwnProperty(c)&&b){c=Ua[c];c.bindTexture();console.log(ma?1:na?65535:255);b=[b[0],b[1],b[2],1];!ma&&na?b=b.map(ra):ma||na||(b=b.map(sa));h.texSubImage2D(h.TEXTURE_2D,0,e,f,1,1,h.RGBA,ma?h.FLOAT:na?pa.HALF_FLOAT_OES:h.UNSIGNED_BYTE,la(b));c=c.s.getContext("2d");var g=c.createImageData(1,1);g.data.d=b;c.putImageData(g,e,f)}return A})});function Xa(a,b){this.l=a;var d=Ka(new ta(a),b);this.i=d.m;this.D=d.D;this.o=aa.standardFragmentHeader+d.code;this.s=aa.vshader;this.h=new ga(this.s,this.o);d=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,d);var d=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),c=h.getAttribLocation(this.h.h,"aPos");h.enableVertexAttribArray(c);var e=h.getAttribLocation(this.h.h,"aTexCoord");h.enableVertexAttribArray(e);var f=new Float32Array([0,0,1,0,0,1,1,1]),g=d.byteLength;h.bufferData(h.ARRAY_BUFFER,g+f.byteLength,
h.STATIC_DRAW);h.bufferSubData(h.ARRAY_BUFFER,0,d);h.bufferSubData(h.ARRAY_BUFFER,g,f);h.vertexAttribPointer(c,3,h.FLOAT,!1,0,0);h.vertexAttribPointer(e,2,h.FLOAT,!1,0,g)};function Ya(a,b){var d=a[2];b.B.hasOwnProperty(d)||(b.B[d]=["uniform sampler2D _sampler_",d,";uniform float _ratio_",d,";uniform vec2 _cropfact_",d,";vec4 _imagergba_",d,"(vec2 A, vec2 B, vec2 p) {p -= A; B -= A;float b = dot(B,B);p = vec2(dot(p,B),_ratio_",d,"*dot(p,vec2(-B.y,B.x)))/b;if(0. <= p.x && p.x <= 1. && 0. <= p.y && p.y <= 1.)return texture2D(_sampler_",d,", p*_cropfact_",d,");else return vec4(0.);}vec3 _imagergb_",d,"(vec2 A, vec2 B, vec2 p) {return _imagergba_",d,"(A, B, p).rgb;}"].join(""));
return["_imagergba_",d,"(",a[0],",",a[1],",",a[3],")"].join("")};function p(a,b){return a===b?!0:Na(a)&&Na(b)?void 0===P[a]?!1:1073741824>P[a][b]:!1}var Q=0;function Ma(a,b){var d=void 0;if(p(b,a))return a;if(p(a,b)||!Na(a))return b;if(!Na(b))return a;for(var c=0;c<Q;c++)p(a,c)&&p(b,c)&&(void 0===d?d=c:p(c,d)&&(d=c));return d}function Za(a){return{index:a,type:"template"}}var R={};
function za(a,b){for(var d in R[a]){for(var c=R[a][d],e=b.length===c.f.length,f={},g=0;g<b.length&&e;g++)"template"===c.f[g].type?(void 0===f[c.f[g].index]&&(f[c.f[g].index]=[]),f[c.f[g].index].push(b[g])):e&=p(b[g],c.f[g]);if(e){var n={},k;for(k in f){n[k]=f[k][0];for(var m in f[k])n[k]=Ma(n[k],f[k][m]),void 0===n[k]&&(e=!1)}if(e){d={f:[]};for(g=0;g<b.length&&e;g++)d.f[g]="template"===c.f[g].type?n[c.f[g].index]:c.f[g];d.g="template"===c.g.type?n[c.g.index]:c.g;return d}}}return A};var H=1,w=2,x=3,v=4,z=5,u=6,I=7,J=8,G=9,L=11,Pa=12,Qa=13,xa=14,K=16,Oa=17,$a={P:H,U:w,T:x,R:v,ea:z,aa:u,ca:I,da:J,color:G,Z:10,V:L,X:Pa,Y:Qa,$:xa,S:15,ba:K,W:Oa};Object.freeze($a);function q(a){return"bool int float complex voidt float[2] float[3] float[4] color point float[2,2] float[3,3] float[4,4] string 2D-Coordinate complex[2] complex[2,2]".split(" ")[a-1]}O[H]=[w];O[w]=[x];O[x]=[v,G];O[I]=[G,10];O[J]=[G];O[10]=[15];O[u]=[15,K];O[v]=[15];O[L]=[Oa];
var ab={f:[H],g:H},bb={f:[H,H],g:H},cb={f:[w],g:w},S={f:[w,w],g:w},db={f:[],g:x},T={f:[x],g:x},U={f:[x,x],g:x},V={f:[v],g:v},W={f:[v,v],g:v},eb={f:[u,u],g:u},fb={f:[I,I],g:I},gb={f:[J,J],g:J},hb={f:[x],g:v},X={f:[v],g:x},ib={f:[u],g:x},jb={f:[I],g:x},kb={f:[J],g:x},lb={f:[u,u],g:x},mb={f:[I,I],g:x},nb={f:[J,J],g:x},ob={f:[w,w],g:H},pb={f:[x,x],g:H},Y=Za(1),qb=Za(2),rb=Za(3);R.sqrt=[hb,V];R.abs=[T,X,ib,jb,kb];R.exp=[T,V];R.log=[hb,V];R.sin=[T,V];R.cos=[T,V];R.tan=[T,V];R.arccos=[hb,V];
R.arcsin=[hb,V];R.arctan=[T,V];R.arctan2=[U,W,X,{f:[u],g:x},{f:[K],g:v}];R.add=[S,U,W,eb,fb,gb];R.sub=[S,U,W,eb,fb,gb,{f:[z,w],g:w},{f:[z,x],g:x},{f:[z,v],g:v},{f:[z,u],g:u},{f:[z,I],g:I},{f:[z,J],g:J}];R.mult=[S,U,W,{f:[L,u],g:u},{f:[Oa,K],g:K},{f:[Pa,I],g:I},{f:[Qa,J],g:J}];var sb=[v,u,I,J];sb.forEach(function(a){R.mult.push({f:[x,a],g:a});R.mult.push({f:[a,x],g:a})});R.mult.push(lb);R.mult.push(mb);R.mult.push(nb);R.div=[U,W];sb.forEach(function(a){R.div.push({f:[a,x],g:a})});
R.pow=[{f:[x,w],g:x},{f:[v,v],g:v}];R.re=[X];R.conjugate=[V];R.im=[X];R.round=[{f:[x],g:w},{f:[v],g:v}];R.floor=[{f:[x],g:w},{f:[v],g:v}];R.ceil=[{f:[x],g:w},{f:[v],g:v}];R.mod=[S,U,W];R.random=[db,T,V];R.randominteger=[cb];R.randomint=[cb];R.seedrandom=[{f:[x],g:z}];R.random=[{f:[],g:x}];R.randombool=[{f:[],g:H}];R.randomnormal=[{f:[],g:x}];R._=[{f:[u,w],g:x},{f:[I,w],g:x},{f:[J,w],g:x},{f:[K,w],g:v}];R["^"]=R.pow;R["*"]=R.mult;R["/"]=R.div;R["+"]=R.add;R["-"]=R.sub;
[">","<",">=","<=","=="].forEach(function(a){return R[a]=[ob,pb]});R["&"]=[bb];R["%"]=[bb];R["="]=[{f:[Y,qb],g:qb}];R[";"]=[{f:[Y,z],g:Y},{f:[Y,qb],g:qb},{f:[Y],g:Y}];R.not=[ab];R.and=[bb];R.or=[bb];R.xor=[bb];"red green blue gray grey hue".split(" ").forEach(function(a){return R[a]=[{f:[x],g:I}]});R["if"]=[{f:[H,Y,Y],g:Y},{f:[H,Y,qb],g:z},{f:[H,Y],g:Y}];R.repeat=[{f:[w,Y],g:Y}];R.apply=[{f:[{type:"list",length:Y,N:qb},{type:"expression",f:qb,g:rb}],g:{type:"list",length:Y,N:rb}}];R.min=[S,U];
R.max=[S,U];R.complex=[{f:[u],g:v}];R.re=[X];R.im=[X];R.genList=[{f:[x,x],g:u},{f:[x,x,x],g:I},{f:[x,x,x,x],g:J},{f:[v,v],g:K}];R.imagergb=[{f:[15,15,xa,15],g:I}];R.imagergba=[{f:[15,15,xa,15],g:J}];Object.freeze(R);for(var tb in $a)var ub=$a[tb]+1,vb=Q,Q=vb>ub?vb:ub;for(var P=Array(Q),va=Array(Q),wb=0;wb<Q;wb++){P[wb]=Array(Q);va[wb]=Array(Q);for(var xb=0;xb<Q;xb++)P[wb][xb]=1073741824,va[wb][xb]=-1;P[wb][wb]=0}for(var yb=0;yb<Q;yb++)for(var zb in O[yb]){var Ab=O[yb][zb];P[yb][Ab]=1;va[yb][Ab]=Ab}
for(var Bb=0;Bb<Q;Bb++)for(var Cb=0;Cb<Q;Cb++)for(var Db=0;Db<Q;Db++)P[Cb][Bb]+P[Bb][Db]<P[Cb][Db]&&(P[Cb][Db]=P[Cb][Bb]+P[Bb][Db],va[Cb][Db]=va[Cb][Bb]);Object.freeze(O);Object.freeze(P);Object.freeze(va);D[H]="bool";D[w]="int";D[x]="float";D[v]="vec2";D[z]="void";D[u]="vec2";D[I]="vec3";D[J]="vec4";D[L]="mat2";D[Pa]="mat3";D[Qa]="mat4";D[G]="vec4";D[10]="vec3";D[15]="vec2";D[K]="vec4";D[Oa]="mat4";Object.freeze(D);function F(a){return function(b){return Aa(a)+"("+b+")"}}function Z(a){return function(b){return"("+b.join(a)+")"}}function Eb(a){return a}var t={},Fb;for(Fb in $a)t[$a[Fb]]={};t[H][w]=F("int");t[w][x]=F("float");t[x][v]=function(a){return"vec2("+a+", 0.)"};t[x][G]=N("float2color");
t[G][I]=function(a){return"("+a+").rgb"};t[G][J]=Eb;t[u][10]=function(a){return"vec3("+a+",1.0)"};t[I][G]=function(a){return"vec4("+a+",1.0)"};t[I][10]=Eb;t[J][G]=Eb;t[10][u]=N("dehomogenize");t[10][I]=Eb;t[10][15]=N("dehomogenize");t[u][15]=Eb;t[v][15]=Eb;t[u][K]=N("vec2complex");t[L][Oa]=N("mat2complex");Object.freeze(t);E.sqrt=[[hb,N("sqrtf")],[V,N("sqrtc")]];E.abs=[[T,F("abs")],[X,F("length")],[ib,F("length")],[jb,F("length")],[kb,F("length")]];E.sin=[[T,F("sin")],[V,N("sinc")]];
E.cos=[[T,F("cos")],[V,N("cosc")]];E.tan=[[T,F("tan")],[V,N("tanc")]];E.exp=[[T,F("exp")],[V,N("expc")]];E.arctan=[[T,F("atan")],[V,N("arctanc")]];E.log=[[hb,N("logr")],[V,N("logc")]];E.add=[];E.sub=[];[S,U,W,eb,fb,gb].forEach(function(a){E.add.push([a,Z("+")]);E.sub.push([a,Z("-")])});function Gb(a){return"-("+a[1]+")"}[w,x,v,u,I,J].forEach(function(a){E.sub.push([{f:[z,a],g:a},Gb])});function Hb(a){return isFinite(a[1])?"("+a[0]+")["+(a[1]-1)+"]":"("+a[0]+")["+a[1]+"-1]"}
E._=[[{f:[u,w],g:x},Hb],[{f:[I,w],g:x},Hb],[{f:[J,w],g:x},Hb],[{f:[K,w],g:v},function(a){if(1===a[1])return"("+a[0]+").xy";if(2===a[1])return"("+a[0]+").zw";console.error("access of components of complex[2] only works for indeces that were hardcoded in CindyJS");return"ERROR: SEE CONSOLE (index was "+a[1]+") \n"}]];E["+"]=E.add;E["-"]=E.sub;
E.mult=[[S,Z("*")],[U,Z("*")],[W,N("multc")],[{f:[L,u],g:u},Z("*")],[{f:[Oa,K],g:K},Z("*")],[{f:[Pa,I],g:I},Z("*")],[{f:[Qa,J],g:J},Z("*")],[lb,F("dot")],[mb,F("dot")],[nb,F("dot")]];sb.forEach(function(a){E.mult.push([{f:[x,a],g:a},Z("*")]);E.mult.push([{f:[a,x],g:a},Z("*")])});E["*"]=E.mult;E.div=[[U,Z("/")],[W,N("divc")]];sb.forEach(function(a){E.div.push([{f:[a,x],g:a},Z("/")])});E["/"]=E.div;E.re=[[X,N("realc")]];E.im=[[X,N("imagc")]];E.floor=[[{f:[x],g:w},function(a){return"int(floor("+a+"))"}]];
E.round=[[{f:[x],g:w},function(a){return"int(floor("+a+"+.5))"}]];E.ceil=[[{f:[x],g:w},function(a){return"int(ceil("+a+"))"}]];E.mod=[[S,Z("%")],[U,F("mod")]];E.random=[[db,N("random")]];E.arctan2=[[U,function(a){return"atan("+a[1]+", "+a[0]+")"}],[W,N("arctan2c")],[X,N("arctan2vec2")],[{f:[u],g:x},N("arctan2vec2")],[{f:[K],g:v},N("arctan2vec2c")]];["red","green","blue","gray","hue"].forEach(function(a){return E[a]=[[{f:[x],g:I},N(a)]]});E.grey=E.gray;E.min=[[S,F("min")],[U,F("min")]];
E.max=[[S,F("max")],[U,F("max")]];E.complex=[[{f:[u],g:v},Eb]];E.pow=[[{f:[x,w],g:x},function(a){return"pow("+a[0]+", float("+a[1]+"))"}],[{f:[v,v],g:v},N("powc")]];E["^"]=E.pow;E.re=[[X,function(a){return"("+a+").x"}]];E.conjugate=[[V,N("conjugate")]];E.im=[[X,function(a){return"("+a+").y"}]];E.genList=[[{f:[x,x],g:u},F("vec2")],[{f:[x,x,x],g:I},F("vec3")],[{f:[x,x,x,x],g:J},F("vec4")],[{f:[v,v],g:K},F("vec4")]];E["&"]=[[bb,Z("&&")]];E["%"]=[[bb,Z("||")]];
[">","<",">=","<=","=="].forEach(function(a){return E[a]=[[ob,Z(a)],[pb,Z(a)]]});E.imagergb=[[{f:[15,15,xa,15],g:I},function(a,b){var d=a[2];Ya(a,b);return["_imagergb_",d,"(",a[0],",",a[1],",",a[3],")"].join("")}]];E.imagergba=[[{f:[15,15,xa,15],g:J},Ya]];Object.freeze(E);M.divc=["multc"];M.powc=["expc","multc","logc"];M.sqrtc=["expc","multc","logc"];M.arccosc=["multc","negc","sqrtc","addc","logc"];M.arcsinc=["multc","negc","sqrtc","addc","logc"];M.tanc=["sinc","cosc","divc"];
M.arctanc=["logc","addc","multc","subc"];M.arctan2c=["logc","divc","sqrtc","multc"];M.arctan2vec2c=["arctan2c"];M.hue=["hsv2rgb"];Object.freeze(M);
})();//# sourceMappingURL=CindyGL.js.map


